define(["exports","react","./e_file_viewer_edison_shmodel_file_async","./c_annotations_view_layer_utils","./c_tslib","./e_edison","./c_apex-metrics_src_types","./e_core_exception","./c_core_exception_info","./c_lodash-es_lodash","./c_core_i18n","./c_src_sink_index","./c_init_data_runtime","metaserver/static/js/modules/constants/page_load","metaserver/static/js/modules/constants/request","metaserver/static/js/langpack","./c_core_notify","react-dom","metaserver/static/js/modules/constants/env","metaserver/static/js/modules/constants/viewer","./c_core_xhr","./c_csrf","metaserver/static/js/modules/constants/web_experience_constants","metaserver/static/js/modules/constants/locales","metaserver/static/js/modules/constants/file_viewer_configuration","metaserver/static/js/modules/constants/file_viewer_feature_experiments","metaserver/static/js/modules/constants/fingerprintjs_constants","metaserver/static/js/modules/constants/sharing","./c_security_util","metaserver/static/js/modules/constants/login_and_register","metaserver/static/js/modules/constants/pdf_editing","metaserver/static/js/modules/constants/time","metaserver/static/js/modules/constants/contacts","metaserver/static/js/modules/constants/search","metaserver/static/js/modules/constants/unity","metaserver/static/js/modules/constants/files_spa"],(function(e,t,a,n,s,r,i,c,o,l,d,m,h,u,g,_,v,f,y,p,j,E,b,k,w,x,z,C,T,I,N,P,S,O,A,H){"use strict";function R(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(a){if("default"!==a){var n=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(t,a,n.get?n:{enumerable:!0,get:function(){return e[a]}})}})),t.default=e,Object.freeze(t)}var F=R(t);function L(e){const{rectangle:t,isEmphasized:s}=e,r=a.cx(n.highlightSegment,{[n.emphasized]:s});return F.createElement("div",{style:a.toRectangleStyle(t),className:r,"data-testid":"annotation-highlight-segment"})}function M(e,t,a,s){return e.map((({id:e,annotation:r})=>{const{type:i,regions:c}=$(r),o=e===t||e===s||e===a;switch(i){case"rectangle":return F.createElement(F.Fragment,{key:e},F.createElement(n.AnnotationRectangle,{rectangle:c[0],isEmphasized:o}),F.createElement(n.AnnotationRectangleFrame,{rectangle:c[0]}));case"highlight":return function(e){const{key:t,highlight:a,isEmphasized:n}=e;return a.map(((e,a)=>F.createElement(L,{key:`${t}-${a}`,rectangle:e,isEmphasized:n})))}({key:e,highlight:c,isEmphasized:o});case"other":return null}}))}const $=e=>"image"===e.type?{type:"rectangle",regions:[e.region]}:{type:e.regionType,regions:e.regions};function q(e){const{threads:t,activatedThreadId:s,focusedThreadId:r,hoverThreadId:i,hideLayer:c,layerSize:o,handleClick:l,handleHoverPointChange:d}=e,m=c?[]:[s,r,i],h=t.filter((e=>"rectangle"===$(e.annotation).type)),u=t.filter((e=>"highlight"===$(e.annotation).type)),g=M(h,...m),_=M(u,...m),v=M([...h,...u],...m);let f;if(o){const e=h.filter((e=>e.id===s));if(e&&1===e.length){const t=$(e[0].annotation).regions[0];f=n.createPlacementFromNormalizedRegion(t,o.width,o.height)}}const y=F.useCallback((e=>{null==d||d(n.toPoint(e))}),[d]),p=F.useCallback((e=>{null==l||l(n.toPoint(e))}),[l]);return F.createElement("div",{className:n.viewLayer,"data-testid":"annotation-view-layer",onMouseMove:y,onClick:p},F.createElement("div",{className:a.cx({[n.hideRegularSublayer]:c})},F.createElement("div",{className:n.regularRectangleSublayer},g),F.createElement("div",{className:n.regularHighlightSublayer},_)),F.createElement("div",{className:n.emphasisSublayer,"data-testid":"annotation-emphasis-sublayer"},v),f&&F.createElement(n.AnnotationCutoutOverlay,{placement:f}))}const D=({threads:e,activeThreadId:t,layer:{dimensions:a},draftAnnotation:n,ui:{scaleFactor:s},focusedThreadId:r,hoverThreadId:i,handleClick:c,handleHoverPointChange:o})=>{if(null==a)return null;const{height:l,width:d}=a;return F.createElement(q,{threads:e,hideLayer:null!=n,activatedThreadId:t,focusedThreadId:r,hoverThreadId:i,layerSize:{height:l*s,width:d*s},handleClick:c,handleHoverPointChange:o})};D.displayName="AnnotationHighlights",e.AnnotationHighlights=D}));
//# sourceMappingURL=c_comments2_annotations_highlights.js-vflJ3In09.map
