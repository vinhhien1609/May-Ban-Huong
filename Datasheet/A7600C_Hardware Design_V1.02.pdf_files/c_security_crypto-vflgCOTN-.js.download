define(["require","exports","./c_tslib","./c_apex-metrics_src_types","./c_security_util"],(function(e,t,r,i,n){"use strict";function o(){return r.__awaiter(this,void 0,void 0,(function*(){const t=i.edge&&!i.edgeChromium();if(void 0!==window.crypto.subtle&&!t&&!i.checkBrowserVersion(i.chrome,40,!1))return window.crypto;if(t){const{legacyEdgeWrapper:t}=yield new Promise((function(t,r){e(["./c_security_legacy_edge_shim"],t,r)})),r=t();if(void 0!==r)return r}throw function(e){const t=new Error(e);return t.isBrowserNotSupported=!0,t}("WebCrypto not supported")}))}t.encryptWithPublicKey=function(e,t,i){return r.__awaiter(this,void 0,void 0,(function*(){return o().then((o=>r.__awaiter(this,void 0,void 0,(function*(){const r=o.getRandomValues(new Uint8Array(12)),s=yield o.subtle.generateKey({name:"AES-GCM",length:128},!0,["encrypt","decrypt"]),c=yield o.subtle.encrypt({name:"AES-GCM",iv:r},s,t),u=yield o.subtle.exportKey("raw",s),a=yield o.subtle.importKey("spki",e,{name:"RSA-OAEP",hash:"SHA-256"},!0,["encrypt"]),y=yield o.subtle.encrypt({name:"RSA-OAEP"},a,u),d=new ArrayBuffer(2);return new DataView(d).setInt16(0,i),n.concatenateArrayBuffers(d,y,r,c)}))))}))},t.hashSHA256=function(e){return r.__awaiter(this,void 0,void 0,(function*(){const t=yield o(),r=yield t.subtle.digest("SHA-256",e);return new Uint8Array(r)}))},t.verifyMessageHmac=function(e,t,i){return r.__awaiter(this,void 0,void 0,(function*(){const r=yield o(),n=yield r.subtle.importKey("raw",e,{name:"HMAC",hash:"SHA-256"},!0,["verify"]);return yield r.subtle.verify({name:"HMAC"},n,i,t)}))}}));
//# sourceMappingURL=c_security_crypto.js-vfloro0i3.map
