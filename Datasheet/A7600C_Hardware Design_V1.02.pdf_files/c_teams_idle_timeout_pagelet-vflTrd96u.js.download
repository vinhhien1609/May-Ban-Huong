define(["exports","./e_file_viewer_edison_shmodel_file_async","react","./c_tslib","./e_edison","./c_apex-metrics_src_types","./e_core_exception","./c_core_exception_info","./c_lodash-es_lodash","./c_core_i18n","./c_src_sink_index","./c_init_data_runtime","metaserver/static/js/modules/constants/page_load","metaserver/static/js/modules/constants/request","metaserver/static/js/langpack","./c_core_notify","react-dom","metaserver/static/js/modules/constants/env","metaserver/static/js/modules/constants/viewer","./c_core_xhr","./c_csrf","metaserver/static/js/modules/constants/web_experience_constants","metaserver/static/js/modules/constants/locales","metaserver/static/js/modules/constants/file_viewer_configuration","metaserver/static/js/modules/constants/file_viewer_feature_experiments","metaserver/static/js/modules/constants/fingerprintjs_constants","metaserver/static/js/modules/constants/sharing","./c_security_util","metaserver/static/js/modules/constants/login_and_register","metaserver/static/js/modules/constants/pdf_editing","metaserver/static/js/modules/constants/time","metaserver/static/js/modules/constants/contacts","metaserver/static/js/modules/constants/search","metaserver/static/js/modules/constants/unity","metaserver/static/js/modules/constants/files_spa"],(function(e,t,s,i,r,o,c,n,a,d,m,h,v,u,l,p,_,I,y,A,R,f,F,j,S,w,g,M,U,E,k,x,b,T,L){"use strict";const N=["keypress","keydown","click","contextmenu","dblclick","mousemove","scroll","touchmove","touchstart"];var B;!function(e){e[e.Standard=1]="Standard",e[e.Advanced=2]="Advanced"}(B||(B={}));class O{constructor(e){this.userReportedActive=!1,this.userIsActive=!1,this.userMouseIsInFrame=!1,this.attachedFrames=[],this.activityReportMode=B.Advanced,this.activityReportInSec=5,this.detectFramesInSec=-1,this.onActivity=()=>{},this.onEnterFrame=()=>{},this.onReportUserIsActive=()=>{},this.onReportUserIsIdle=()=>{},this.attachListenerToNewFrames=()=>{const e=Array.prototype.slice.call(window.document.getElementsByTagName("frame")),t=Array.prototype.slice.call(window.document.getElementsByTagName("iframe")),s=e.concat(t);for(const e of s)this.attachedFrames.indexOf(e)<0&&(e.addEventListener("mouseenter",this.onMouseEntersFrame.bind(this),this,!1),this.attachedFrames.push(e),this.userMouseIsInFrame=!0)},this.onUserActivity=()=>{this.onActivity(),this.userIsActive=!0,this.activityReportMode!==B.Advanced||this.userReportedActive||this.reportActivity(),this.userMouseIsInFrame=!1},this.overrideDefaultsWithOptions(e),N.forEach((e=>{window.addEventListener(e,this.onUserActivity,!1)})),setInterval(this.onTimerTick.bind(this),1e3*this.activityReportInSec),this.detectFramesInSec>0&&setInterval(this.attachListenerToNewFrames,1e3*this.detectFramesInSec),this.reportActivity()}onMouseEntersFrame(){this.onEnterFrame(),this.userMouseIsInFrame=!0}onTimerTick(){this.userReportedActive=!1,this.activityReportMode===B.Standard&&this.userIsActive||this.userMouseIsInFrame&&this.isPageVisible()?this.reportActivity():this.onReportUserIsIdle()}reportActivity(){this.onReportUserIsActive(),this.userReportedActive=!0,this.userIsActive=!1}overrideDefaultsWithOptions(e){this.activityReportInSec=e.activityReportInSec||this.activityReportInSec,this.activityReportMode=e.activityReportMode||this.activityReportMode,this.detectFramesInSec=e.detectFramesInSec||this.detectFramesInSec,this.onActivity=e.onActivity||this.onActivity,this.onEnterFrame=e.onEnterFrame||this.onEnterFrame,this.onReportUserIsActive=e.onReportUserIsActive||this.onReportUserIsActive,this.onReportUserIsIdle=e.onReportUserIsIdle||this.onReportUserIsIdle}isPageVisible(){return"hidden"!==window.document.visibilityState}}const q=30;e.initialize_module=function({activityReportInSec:e}){!function(e){new O({onReportUserIsActive:()=>{t.SilentBackgroundRequest({url:"/refresh_idle_session_cookie",data:{}})},activityReportInSec:e,detectFramesInSec:q})}(e)}}));
//# sourceMappingURL=c_teams_idle_timeout_pagelet.js-vflxFV_UD.map
