define(["exports","./e_file_viewer_edison_shmodel_file_async","./c_flows_redux_reducer","react","./c_tslib","./e_edison","./c_apex-metrics_src_types","./e_core_exception","./c_core_exception_info","./c_lodash-es_lodash","./c_core_i18n","./c_src_sink_index","./c_init_data_runtime","metaserver/static/js/modules/constants/page_load","metaserver/static/js/modules/constants/request","metaserver/static/js/langpack","./c_core_notify","react-dom","metaserver/static/js/modules/constants/env","metaserver/static/js/modules/constants/viewer","./c_core_xhr","./c_csrf","metaserver/static/js/modules/constants/web_experience_constants","metaserver/static/js/modules/constants/locales","metaserver/static/js/modules/constants/file_viewer_configuration","metaserver/static/js/modules/constants/file_viewer_feature_experiments","metaserver/static/js/modules/constants/fingerprintjs_constants","metaserver/static/js/modules/constants/sharing","./c_security_util","metaserver/static/js/modules/constants/login_and_register","metaserver/static/js/modules/constants/pdf_editing","metaserver/static/js/modules/constants/time","metaserver/static/js/modules/constants/contacts","metaserver/static/js/modules/constants/search","metaserver/static/js/modules/constants/unity","metaserver/static/js/modules/constants/files_spa"],(function(e,t,r,o,s,n,i,a,l,c,d,u,f,m,v,_,g,w,p,k,E,h,A,S,W,T,B,j,I,b,x,O,P,F,M,y){"use strict";const C=e=>e[t.AUTOMATIONS_NAMESPACE_KEY]||r.defaultAutomationsState,R=e=>{const{userAutomations:t}=C(e);return"completed"===t.status&&t.data?t.data.filter((e=>!r.isInherited(e))):[]},U=e=>{const{userExperiments:t}=C(e);return"completed"===t.status&&t.data?t.data:[]},L=e=>C(e).workflowBuilder,D=e=>{const t=L(e);return(null==t?void 0:t.actions)||[]},N=e=>{const{workflowStepsConfig:t}=C(e);return t},q=t.createSelector(N,D,((e,t)=>"completed"===e.status?0===t.length?e.allowedTriggers:1===t.length?Object.keys(e.triggerActionMaps).filter((r=>e.triggerActionMaps[r].includes(t[0].actionType))):e.allowedTriggers.filter((e=>"scheduled"!==e)):["file_add"])),H=e=>{var t;return(null===(t=L(e))||void 0===t?void 0:t.width)||r.MODAL_DEFAULT_WIDTH},K=t.createSelector(H,(e=>e===r.MODAL_FULL_WIDTH));const V=e=>{var t;return null===(t=L(e))||void 0===t?void 0:t.savedWorkflowTemplateState},X=e=>{const r=U(e).find((e=>e.feature===t.UI_EXPERIMENTS.SUBFOLDER_INHERITANCE));return"ON"===(null==r?void 0:r.variant)},Y=e=>t=>{const{inheritanceBlockingFqPaths:r}=C(t);return!!e&&r.has(e)};e.canWorkflowBuilderRenderPreview=K,e.getAllowedWorkflowActions=e=>{const{workflowStepsConfig:t}=C(e);return"completed"===t.status?t.allowedActions:[]},e.getAllowedWorkflowTriggers=q,e.getAutomationsState=C,e.getFlowsFolderRulesActionExperiments=e=>{const{workflowStepsConfig:t}=C(e);return"completed"===t.status&&t.actionExperiments||[]},e.getOptOutCheckboxState=e=>{const t=V(e);return t&&t.optOut||!1},e.getSavedWorkflowTemplateCheckboxState=e=>{const t=V(e);return t&&t.isChecked||!1},e.getSavedWorkflowTemplateExperiment=function(e){const{userExperiments:r}=C(e);let o;return"completed"===r.status&&r.data&&(o=r.data.find((e=>e.feature===t.UI_EXPERIMENTS.SAVED_WORKFLOW_TEMPLATE_CREATE))),o},e.getSavedWorkflowTemplateName=e=>{const t=V(e);return void 0!==t&&t.name||""},e.getSavedWorkflowTemplateVariant=function(e){const{userExperiments:r}=C(e);let o;return"completed"===r.status&&r.data&&(o=r.data.find((e=>e.feature===t.UI_EXPERIMENTS.SAVED_WORKFLOW_TEMPLATE_CREATE))),(null==o?void 0:o.variant)||"OFF"},e.getSavedWorkflowTemplates=e=>{const{savedWorkflowTemplates:t}=C(e);return t||[]},e.getUserAutomation=e=>t=>{if(e)return R(t).find((({fqPath:t})=>t===e))},e.getUserAutomationWithInheritance=e=>r=>{const{userAutomations:o}=C(r);if(!e||"completed"!==o.status||!o.data)return;const s=new Map(o.data.map((e=>[e.fqPath,e])));if(s.has(e))return s.get(e);if(!X(r)||Y(e)(r))return;let n=t.parent_dir(e);for(;"/"!==n;){const o=s.get(n);if(o)return o.inheritable?Object.assign(Object.assign({},o),{fqPath:e,inheritedFromFqPath:o.fqPath}):void 0;if(Y(n)(r))return;n=t.parent_dir(n)}},e.getUserAutomations=R,e.getUserExperiments=U,e.getWorkflowBuilderActions=D,e.getWorkflowBuilderApplyToExisting=e=>{var t;return(null===(t=L(e))||void 0===t?void 0:t.applyToExistingFiles)||!1},e.getWorkflowBuilderDashboardActionSource=e=>{var t;return null===(t=L(e))||void 0===t?void 0:t.dashboardActionSource},e.getWorkflowBuilderEntryPoint=e=>{var t;return null===(t=C(e).workflowBuilder)||void 0===t?void 0:t.entryPoint},e.getWorkflowBuilderInheritable=e=>{var t;return(null===(t=L(e))||void 0===t?void 0:t.inheritable)||!1},e.getWorkflowBuilderIsEnabled=e=>{const t=L(e);return Boolean(null==t?void 0:t.isEnabled)},e.getWorkflowBuilderModalSessionId=e=>{var t;return(null===(t=C(e).workflowBuilder)||void 0===t?void 0:t.modalSessionId)||""},e.getWorkflowBuilderOperation=e=>{var t;return(null===(t=C(e).workflowBuilder)||void 0===t?void 0:t.operation)||"create"},e.getWorkflowBuilderPreviewActionId=e=>{const t=L(e);return null==t?void 0:t.previewActionId},e.getWorkflowBuilderStatus=e=>{var t;return null===(t=L(e))||void 0===t?void 0:t.isEnabled},e.getWorkflowBuilderSurface=e=>{var t;return null===(t=L(e))||void 0===t?void 0:t.surface},e.getWorkflowBuilderTrigger=e=>{const t=L(e);return null==t?void 0:t.trigger},e.getWorkflowBuilderWidth=H,e.getWorkflowStepsConfig=N,e.isInheritanceBlockingFqPath=Y,e.shouldSeeSubfolderInheritance=X,e.shouldSubscribeToBolt=e=>C(e).shouldSubscribeToBolt}));
//# sourceMappingURL=c_flows_redux_selectors.js-vflaxwcDs.map
