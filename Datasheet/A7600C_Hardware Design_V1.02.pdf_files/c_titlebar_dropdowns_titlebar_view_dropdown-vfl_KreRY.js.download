define(["exports","react","./e_file_viewer_edison_shmodel_file_async","./c_tslib","./c_ui-icon_line_full-width","./c_core_i18n","./c_file_viewer_components_titlebar_menu_content","./e_edison","./c_apex-metrics_src_types","./e_core_exception","./c_core_exception_info","./c_lodash-es_lodash","./c_core_notify","react-dom","metaserver/static/js/modules/constants/env","./c_src_sink_index","metaserver/static/js/modules/constants/viewer","./c_core_xhr","./c_csrf","./c_init_data_runtime","metaserver/static/js/modules/constants/page_load","metaserver/static/js/modules/constants/request","metaserver/static/js/modules/constants/web_experience_constants","metaserver/static/js/modules/constants/locales","metaserver/static/js/modules/constants/file_viewer_configuration","metaserver/static/js/modules/constants/file_viewer_feature_experiments","metaserver/static/js/modules/constants/fingerprintjs_constants","metaserver/static/js/modules/constants/sharing","./c_security_util","metaserver/static/js/modules/constants/login_and_register","metaserver/static/js/modules/constants/pdf_editing","metaserver/static/js/modules/constants/time","metaserver/static/js/modules/constants/contacts","metaserver/static/js/modules/constants/search","metaserver/static/js/modules/constants/unity","metaserver/static/js/modules/constants/files_spa","metaserver/static/js/langpack"],(function(e,t,i,s,o,n,r,a,c,l,d,u,_,m,v,f,T,I,p,w,C,A,S,b,h,g,N,P,y,R,j,F,O,x,L,D,U){"use strict";function k(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(i){if("default"!==i){var s=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:function(){return e[i]}})}})),t.default=e,Object.freeze(t)}var M=k(t);const E=e=>({label:i.FULL_SCREEN_ACTION_STRING,userAction:i.UserAction.ToggleFullscreenOn,action:{type:"click",handler:e},disabled:{disabled:!1},icon:i.FullscreenLine}),V=[i.PreviewType.Image,i.PreviewType.SsrDoc],G={filterValidFile:i.allowAllFiles,filterValidUser:e=>({user:e}),shouldShowForPreviewSurface:i.alwaysShow,shouldShowForPreviewType:i.filterPreviewTypeIn(V)},H=i.withActionCondition(G,((e,t)=>({label:i.FIT_TO_WIDTH_ACTION_STRING,icon:o.FullWidthLine,action:{type:"click",handler:t},disabled:{disabled:!1},userAction:i.UserAction.ZoomFitToWidth})),void 0),B=i.withActionCondition(G,((e,t)=>({label:i.FIT_TO_PAGE_ACTION_STRING,icon:o.FillScreenLine,action:{type:"click",handler:t},disabled:{disabled:!1},userAction:i.UserAction.ZoomFitToPage})),void 0);M.default.memo((({fileViewerId:e})=>{const t=i.useDispatch(),s=i.useStabilizedCallback((()=>{const s={fileViewerId:e,isFullscreen:!1,sourceContext:i.UserActionContext.TitleBarMain};t(i.setUiHidden(s))}));return M.default.createElement(i.Menu.ActionItem,{role:"menuitem",withLeftAccessory:M.default.createElement(i.UIIcon,{src:i.HideLine,width:"20px",height:"20px"}),interactive:!0,value:{handler:s}},n.intl.formatMessage(i.HIDE_TOOLS_ACTION_STRING))})).displayName="HideToolsActionButton";const z=i.withActionCondition(i.transcriptActionConditions,((e,t,o)=>({userAction:void 0,label:t?i.TRANSCRIPT_ACTION_HIDE_STRING:i.TRANSCRIPT_ACTION_SHOW_STRING,accessibleLabel:t?i.TRANSCRIPT_ACTION_HIDE_ACCESSIBILITY_STRING:i.TRANSCRIPT_ACTION_SHOW_ACCESSIBILITY_STRING,action:{type:"click",handler:()=>s.__awaiter(void 0,void 0,void 0,(function*(){return o()}))},disabled:{disabled:!1},icon:i.ClosedCaptionsLine})),void 0);e.default=({contentProps:e})=>{const{previewSurface:t,pluginArgs:o}=i.usePluginMigrationContext(),{fileViewerId:n,logUserAction:a}=i.useFileViewerContext(),c=i.useFileViewerSelector(i.getCurrentPreviewKey,n),l=i.useRootPreviewType(),d=o.getActiveFile().file,u=o.getActiveFile().sharePermission,_=o.user,m=M.useMemo((()=>({file:d,user:_,previewSurface:t,previewType:l,sharePermission:u})),[d,_,t,l,u]),v=((e,t,o)=>{const n=i.useDispatch(),r=i.useStabilizedCallback((()=>s.__awaiter(void 0,void 0,void 0,(function*(){n(i.updateZoomScaleFactor({fileViewerId:t,previewKey:o,zoomType:"fitToWidth"}))}))));return M.default.useMemo((()=>H(e,r)),[e,r])})(m,n,c),f=((e,t,o)=>{const n=i.useDispatch(),r=i.useStabilizedCallback((()=>s.__awaiter(void 0,void 0,void 0,(function*(){n(i.updateZoomScaleFactor({fileViewerId:t,previewKey:o,zoomType:"fitToPage"}))}))));return M.default.useMemo((()=>B(e,r)),[e,r])})(m,n,c),T=((e,t)=>{const o=i.useDispatch(),n=i.useStabilizedCallback((()=>s.__awaiter(void 0,void 0,void 0,(function*(){const s={fileViewerId:e,previewKey:t,sourceContext:i.UserActionContext.TitleBarMain};o(i.enterFullScreen(s))}))));return M.default.useMemo((()=>E(n)),[n])})(n,c),I=i.useCommentAction(m),p=((e,t)=>{var s,o;const{fileViewerId:n}=i.useFileViewerContext(),r=(null===(o=null===(s=i.useFileViewerSelector(i.getPluginsState,n))||void 0===s?void 0:s.sidebarPlugins)||void 0===o?void 0:o.right)===i.TRANSCRIPT_BLADE_PLUGIN_ID,a=i.useCloseSidebarCallback(i.TRANSCRIPT_BLADE_PLUGIN_ID,t),c=i.useSetRightSidebarCallback(i.TRANSCRIPT_BLADE_PLUGIN_ID,t),l=M.default.useCallback((()=>{r?a():c()}),[r,a,c]);return M.default.useMemo((()=>z(e,r,l)),[r,l,e])})(m,i.UserActionContext.ViewMenu),w=(e=>{const t=i.useDispatch(),o=i.useStabilizedCallback((()=>s.__awaiter(void 0,void 0,void 0,(function*(){t(i.setUiHidden({fileViewerId:e,isFullscreen:!1,sourceContext:i.UserActionContext.TitleBarMain}))}))));return M.default.useMemo((()=>({userAction:i.UserAction.HideTools,label:i.HIDE_TOOLS_ACTION_STRING,action:{type:"click",handler:o},disabled:{disabled:!1},icon:i.HideLine})),[o])})(n),C=M.useMemo((()=>[[v,f,T],[I,p,w]]),[v,f,T,I,p,w]),A=M.useCallback((e=>{a(e,i.UserActionContext.ViewMenu)}),[a]);return M.createElement(r.TitlebarMenuContent,{elementId:"titlebar-view-dropdown",contentProps:e,options:C,logAction:A})}}));
//# sourceMappingURL=c_titlebar_dropdowns_titlebar_view_dropdown.js-vflmc-UCT.map
