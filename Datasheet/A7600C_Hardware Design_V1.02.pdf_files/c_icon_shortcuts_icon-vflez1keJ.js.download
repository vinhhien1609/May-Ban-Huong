define(["exports","./c_tslib","react","./e_file_viewer_edison_shmodel_file_async","./c_ui_title_bubble","./c_core_i18n","./c_ui_overlay","./e_edison"],(function(t,e,s,a,r,i,l,c){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}var m,g=o(s);class n extends g.default.PureComponent{render(){const t=function(t){const e={is_locked:!1,is_lockholder:!1,lockholder_name:""};return t?(t.lock_info?(e.is_locked=!0,e.lockholder_name=t.lock_info.lockholder_name,e.is_lockholder=t.lock_info.is_lockholder):("is_locked"in t&&(e.is_locked=t.is_locked||!1),"is_lockholder"in t&&(e.is_lockholder=t.is_lockholder||!1),"lockholder_name"in t&&(e.lockholder_name=t.lockholder_name||"")),e):e}(this.props.file),{is_locked:e,is_lockholder:s}=t;if(!e)return this.props.children;const a=g.default.createElement("div",null,function(t){const{is_lockholder:e,lockholder_name:s}=t;return e?i.intl.formatMessage({id:"TsSIGV",defaultMessage:"Locked by You"}):i.intl.formatMessage({id:"x3AX+F",defaultMessage:"Locked by {name}"},{name:s})}(t)),c="file-icon__lock-badge-"+(this.props.variant||"small")+"-"+(s?"right":"left");return g.default.createElement(r.TitleBubble,{content:a,position:l.StickyPosition.TOP},g.default.createElement("div",{className:"titleBubble-positioningTarget file-icon__lock-badge-container"},this.props.children,g.default.createElement("div",{className:c},g.default.createElement("svg",{viewBox:"0 0 10 10",version:"1.1"},g.default.createElement("g",{id:"Page-1",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},g.default.createElement("g",{id:"Artboard"},g.default.createElement("g",{id:"Group-11-Copy-2"},g.default.createElement("g",{id:"Group-10-Copy-7"},g.default.createElement("g",{id:"Group-4"},g.default.createElement("circle",{id:"Oval-Copy-47",fill:"#FFFFFF",cx:"5",cy:"5",r:"5"}),g.default.createElement("circle",{id:"Combined-Shape-Copy-8",fill:"#DDDFE1",cx:"5",cy:"5",r:"3.95833333"}))),g.default.createElement("rect",{id:"Rectangle-Copy-7",fill:"#707781",x:"3.17385288",y:"4.58333333",width:"3.75",height:"2.5"}),g.default.createElement("path",{d:"M5.04885288,2.5 C5.73889678,2.5 6.29828788,3.0593911 6.29828788,3.749435 L6.29828788,5.83333333 L3.79941788,5.83333333 L3.79941788,3.749435 C3.79941788,3.0593911 4.35880899,2.5 5.04885288,2.5 Z M5.04861271,3.1251631 C4.70356115,3.1251631 4.4238416,3.40488266 4.4238416,3.74993422 L4.4238416,5.20817023 L5.67338383,5.20817023 L5.67338383,3.74993422 C5.67338383,3.40488266 5.39366428,3.1251631 5.04861271,3.1251631 Z",id:"Combined-Shape-Copy",fill:"#707781"}))))))))}}n.displayName="LockBadge",function(t){t[t.SHOW_ICON=0]="SHOW_ICON",t[t.PREVIEW_LOADED=1]="PREVIEW_LOADED",t[t.PREVIEW_DEBOUNCING=2]="PREVIEW_DEBOUNCING"}(m||(m={}));class u extends g.default.Component{constructor(t){super(t),this.prefetchImage=null,this.handleImageLoad=()=>{this.setState({previewState:m.PREVIEW_LOADED})},this.handleImageError=()=>{this.setState({previewState:m.SHOW_ICON})},this.state={previewState:t.showPreview&&t.iconDelay&&t.file.thumbnail_url_tmpl?m.PREVIEW_DEBOUNCING:m.SHOW_ICON}}componentDidMount(){this.props.showPreview&&this.props.file.thumbnail_url_tmpl&&(this.preloadImage(),this.props.iconDelay&&(this.setState({previewState:m.PREVIEW_DEBOUNCING}),this.timeoutId=window.setTimeout((()=>{this.state.previewState===m.PREVIEW_DEBOUNCING&&this.setState({previewState:m.SHOW_ICON})}),this.props.iconDelay)))}componentDidUpdate(t){this.props.showPreview&&this.props.file.thumbnail_url_tmpl!==t.file.thumbnail_url_tmpl&&(this.preloadImage(),this.setState({previewState:m.SHOW_ICON}))}componentWillUnmount(){this.timeoutId&&window.clearTimeout(this.timeoutId),this.prefetchImage&&(this.prefetchImage.onload=null,this.prefetchImage=null)}preloadImage(){const{thumbnail_url_tmpl:t}=this.props.file;t&&(this.prefetchImage=new Image,this.prefetchImage.onload=this.handleImageLoad,this.prefetchImage.onerror=this.handleImageError,this.prefetchImage.src=t)}addBadge(t,e){const{hideBadge:s,variant:a,file:r}=this.props;return s?e:t?g.default.createElement(n,{file:r,variant:"large"===a?"preview-large":"preview-small"},e):g.default.createElement(n,{file:r,variant:a},e)}render(){const t=this.props,{file:s,variant:r,showPreview:l,iconDelay:c,hideBadge:o,previewUrl:n,onPreviewClick:u}=t,h=e.__rest(t,["file","variant","showPreview","iconDelay","hideBadge","previewUrl","onPreviewClick"]),{fq_path:v,thumbnail_url_tmpl:d,isDeleted:_,is_symlink:p,filename:f}=s,{previewState:b}=this.state,E=v||f||"";if(b===m.PREVIEW_DEBOUNCING)return null;if(l&&d&&b===m.PREVIEW_LOADED){const t=g.default.createElement("img",Object.assign({src:d,alt:s.fq_path,draggable:!1,onError:this.handleImageError},h));return this.addBadge(!0,n?g.default.createElement(a.Tooltip,{title:i.intl.formatMessage({id:"VbRtEL",defaultMessage:"Preview"})},g.default.createElement(a.Link,{onClick:u,href:n,className:"file-icon__preview"},t)):t)}const w=a.getDigIcon(s.icon,r);if(w)return this.addBadge(!1,w);if(p){const t="symlink-"+(r||"small");return g.default.createElement(a.IconContent,Object.assign({name:t,disabled:_},h))}return this.addBadge(!1,g.default.createElement(a.FileIcon$1,Object.assign({path:E,variant:r,disabled:_},h)))}}u.defaultProps={showPreview:!0,variant:"small"},u.displayName="FileIcon";const h={"airtable.com":{large:c.static_url("/static/metaserver/static/images/shortcuts/airtable-large-vflt1e3Cx.svg"),small:c.static_url("/static/metaserver/static/images/shortcuts/airtable-small-vflEHBh5o.svg")},"asana.com":{large:c.static_url("/static/metaserver/static/images/shortcuts/asana-large-vflf7f4G9.svg"),small:c.static_url("/static/metaserver/static/images/shortcuts/asana-small-vflJyy6bc.svg")},"basecamp.com":{large:c.static_url("/static/metaserver/static/images/shortcuts/basecamp-large-vfldgzMMi.svg"),small:c.static_url("/static/metaserver/static/images/shortcuts/basecamp-small-vfllOCj-8.svg")},"canva.com":{large:c.static_url("/static/metaserver/static/images/shortcuts/canva-large-vfl9u36ow.svg"),small:c.static_url("/static/metaserver/static/images/shortcuts/canva-small-vflB4AiHs.svg")},"^(www.)?dropbox.com":{large:c.static_url("/static/metaserver/static/images/shortcuts/dropbox-large-vflhssS9m.svg"),small:c.static_url("/static/metaserver/static/images/shortcuts/dropbox-small-vflzhX7_M.svg")},"fb.me":{large:c.static_url("/static/metaserver/static/images/shortcuts/facebook-large-vflmg0gCX.svg"),small:c.static_url("/static/metaserver/static/images/shortcuts/facebook-small-vflU4VX_b.svg")},"facebook.com":{large:c.static_url("/static/metaserver/static/images/shortcuts/facebook-large-vflmg0gCX.svg"),small:c.static_url("/static/metaserver/static/images/shortcuts/facebook-small-vflU4VX_b.svg")},"figma.com":{large:c.static_url("/static/metaserver/static/images/shortcuts/figma-large-vflNPObyB.svg"),small:c.static_url("/static/metaserver/static/images/shortcuts/figma-small-vflLqP7KG.svg")},"docs.google.com/document":{large:c.static_url("/static/metaserver/static/images/shortcuts/gdoc-large-vflhZiPNM.svg"),small:c.static_url("/static/metaserver/static/images/shortcuts/gdoc-small-vflJSp2Pa.svg")},"drive.google.com":{large:c.static_url("/static/metaserver/static/images/shortcuts/gdrive-large-vflEZcTVL.svg"),small:c.static_url("/static/metaserver/static/images/shortcuts/gdrive-small-vflH4HIX0.svg")},"gmail.com":{large:c.static_url("/static/metaserver/static/images/shortcuts/gmail-large-vflhA_j0f.svg"),small:c.static_url("/static/metaserver/static/images/shortcuts/gmail-small-vfl1PyhIe.svg")},"mail.google.com":{large:c.static_url("/static/metaserver/static/images/shortcuts/gmail-large-vflhA_j0f.svg"),small:c.static_url("/static/metaserver/static/images/shortcuts/gmail-small-vfl1PyhIe.svg")},"goo.gl":{large:c.static_url("/static/metaserver/static/images/shortcuts/google-large-vflat6ayx.svg"),small:c.static_url("/static/metaserver/static/images/shortcuts/google-small-vfl3zmlgE.svg")},"^(www.)?google.com":{large:c.static_url("/static/metaserver/static/images/shortcuts/google-large-vflat6ayx.svg"),small:c.static_url("/static/metaserver/static/images/shortcuts/google-small-vfl3zmlgE.svg")},"docs.google.com/spreadsheets":{large:c.static_url("/static/metaserver/static/images/shortcuts/gsheet-large-vflZUdkfi.svg"),small:c.static_url("/static/metaserver/static/images/shortcuts/gsheet-small-vflkRjXaP.svg")},"docs.google.com/presentation":{large:c.static_url("/static/metaserver/static/images/shortcuts/gslide-large-vfl7FzOLm.svg"),small:c.static_url("/static/metaserver/static/images/shortcuts/gslide-small-vflzkI1UZ.svg")},"instagr.am":{large:c.static_url("/static/metaserver/static/images/shortcuts/instagram-large-vfl8ZYhWS.svg"),small:c.static_url("/static/metaserver/static/images/shortcuts/instagram-small-vflEbssH5.svg")},"instagram.com":{large:c.static_url("/static/metaserver/static/images/shortcuts/instagram-large-vfl8ZYhWS.svg"),small:c.static_url("/static/metaserver/static/images/shortcuts/instagram-small-vflEbssH5.svg")},"lnkd.in":{large:c.static_url("/static/metaserver/static/images/shortcuts/linkedin-large-vfl7zc7R2.svg"),small:c.static_url("/static/metaserver/static/images/shortcuts/linkedin-small-vflxLNIBj.svg")},"linkedin.com":{large:c.static_url("/static/metaserver/static/images/shortcuts/linkedin-large-vfl7zc7R2.svg"),small:c.static_url("/static/metaserver/static/images/shortcuts/linkedin-small-vflxLNIBj.svg")},"lucidchart.com":{large:c.static_url("/static/metaserver/static/images/shortcuts/lucidchart-large-vflQTyEKi.svg"),small:c.static_url("/static/metaserver/static/images/shortcuts/lucidchart-small-vflaOL5q2.svg")},"notion.so":{large:c.static_url("/static/metaserver/static/images/shortcuts/notion-large-vflYRovRr.svg"),small:c.static_url("/static/metaserver/static/images/shortcuts/notion-small-vfl5My9CC.svg")},"nyti.ms":{large:c.static_url("/static/metaserver/static/images/shortcuts/nyt-large-vflWbppW1.svg"),small:c.static_url("/static/metaserver/static/images/shortcuts/nyt-small-vflsX7CkU.svg")},"nytimes.com":{large:c.static_url("/static/metaserver/static/images/shortcuts/nyt-large-vflWbppW1.svg"),small:c.static_url("/static/metaserver/static/images/shortcuts/nyt-small-vflsX7CkU.svg")},"paper.dropbox.com":{large:c.static_url("/static/metaserver/static/images/shortcuts/paper-large-vflveMiR5.svg"),small:c.static_url("/static/metaserver/static/images/shortcuts/paper-small-vfldcpICX.svg")},"prezi.com":{large:c.static_url("/static/metaserver/static/images/shortcuts/prezi-large-vflDRP6HP.svg"),small:c.static_url("/static/metaserver/static/images/shortcuts/prezi-small-vflrgOrNx.svg")},"smartsheet.com":{large:c.static_url("/static/metaserver/static/images/shortcuts/smartsheet-large-vflnrSkzr.svg"),small:c.static_url("/static/metaserver/static/images/shortcuts/smartsheet-small-vfl58A-Ru.svg")},"trello.com":{large:c.static_url("/static/metaserver/static/images/shortcuts/trello-large-vflbMR3K2.svg"),small:c.static_url("/static/metaserver/static/images/shortcuts/trello-small-vflEVN1op.svg")},"vimeo.com":{large:c.static_url("/static/metaserver/static/images/shortcuts/vimeo-large-vflPEA_FK.svg"),small:c.static_url("/static/metaserver/static/images/shortcuts/vimeo-small-vflw5PZQT.svg")},"washingtonpost.com":{large:c.static_url("/static/metaserver/static/images/shortcuts/washingtonpost-large-vflSNT2iZ.svg"),small:c.static_url("/static/metaserver/static/images/shortcuts/washingtonpost-small-vflDCjsyG.svg")},"wikipedia.org":{large:c.static_url("/static/metaserver/static/images/shortcuts/wikipedia-large-vfltwWavN.svg"),small:c.static_url("/static/metaserver/static/images/shortcuts/wikipedia-small-vfliwkdPY.svg")},"youtube.com":{large:c.static_url("/static/metaserver/static/images/shortcuts/youtube-large-vflBI6lix.svg"),small:c.static_url("/static/metaserver/static/images/shortcuts/youtube-small-vfl9JnY8u.svg")},"zoom.us":{large:c.static_url("/static/metaserver/static/images/shortcuts/zoom-large-vflbCB8tE.svg"),small:c.static_url("/static/metaserver/static/images/shortcuts/zoom-small-vflAI2niM.svg")}},v=(t,e)=>{if(!t)return null;let s;t.startsWith("http://")||t.startsWith("https://")||(t="http://"+t);try{s=new URL(t)}catch(t){return null}const a=s.hostname+s.pathname;for(const t in h)if(new RegExp(t).test(a))return h[t][e];return null};class d extends g.default.Component{constructor(t){super(t),this.fetchStaticIconUrl=t=>{const e=v(this.props.shortcutUrlForIcon||this.props.file.open_to_url,"large"===this.props.variant?"large":"small");e?this.setState({thumbnailUrl:e,prefetchDone:!0}):this.setState({thumbnailUrl:t?null:this.state.thumbnailUrl,prefetchDone:!0})},this.state={thumbnailUrl:t.file.thumbnail_url_tmpl,prefetchDone:!1}}componentDidMount(){if("large"===this.props.variant&&this.state.thumbnailUrl){const t=new Image;t.onload=()=>{this.setState({prefetchDone:!0})},t.onerror=()=>this.fetchStaticIconUrl(!0),t.src=this.state.thumbnailUrl}else this.fetchStaticIconUrl(!1)}render(){const t=this.props,{file:s,showPreview:a}=t,r=e.__rest(t,["file","showPreview"]),i=Object.assign(Object.assign({},s),{thumbnail_url_tmpl:this.state.thumbnailUrl});return this.state.prefetchDone?g.default.createElement(u,Object.assign({},Object.assign(Object.assign({},r),{file:i,showPreview:!!i.thumbnail_url_tmpl||a,className:i.thumbnail_url_tmpl?"shortcuts-file-icon":void 0}))):null}}d.displayName="ShortcutsFileIcon",t.FileIcon=u,t.ShortcutsFileIcon=d,t.urlToShortcutIconAsset=v}));
//# sourceMappingURL=c_icon_shortcuts_icon.js-vflOKTQDE.map
