define(["exports","./e_file_viewer_edison_shmodel_file_async","react","./c_tslib","./e_edison","./c_apex-metrics_src_types","./e_core_exception","./c_core_exception_info","./c_lodash-es_lodash","./c_core_i18n","./c_src_sink_index","./c_init_data_runtime","metaserver/static/js/modules/constants/page_load","metaserver/static/js/modules/constants/request","metaserver/static/js/langpack","./c_core_notify","react-dom","metaserver/static/js/modules/constants/env","metaserver/static/js/modules/constants/viewer","./c_core_xhr","./c_csrf","metaserver/static/js/modules/constants/web_experience_constants","metaserver/static/js/modules/constants/locales","metaserver/static/js/modules/constants/file_viewer_configuration","metaserver/static/js/modules/constants/file_viewer_feature_experiments","metaserver/static/js/modules/constants/fingerprintjs_constants","metaserver/static/js/modules/constants/sharing","./c_security_util","metaserver/static/js/modules/constants/login_and_register","metaserver/static/js/modules/constants/pdf_editing","metaserver/static/js/modules/constants/time","metaserver/static/js/modules/constants/contacts","metaserver/static/js/modules/constants/search","metaserver/static/js/modules/constants/unity","metaserver/static/js/modules/constants/files_spa"],(function(e,t,s,n,r,i,a,c,o,l,d,u,_,m,f,h,v,j,p,g,T,x,I,y,w,E,N,C,L,k,A,D,P,R,S){"use strict";function V(e,s){const n=Math.abs(e-s);return n<t.INTERSECTION_DELTA?n:null}function b({x:e,y:s},n){const r=n.y,i=n.y+n.height,a=n.x,c=n.x+n.width;if(e>=a-t.INTERSECTION_DELTA&&e<=c+t.INTERSECTION_DELTA){if(null!=V(s,r))return!0;if(null!=V(s,i))return!0}if(s>=r&&s<=i){if(null!=V(e,a))return!0;if(null!=V(e,c))return!0}return!1}function O(e,t){if("image"===t.type){if(b(e,t.region))return!0}else if("document"===t.type)for(const s of t.regions)if(b(e,s))return!0;return!1}const H=(e,t)=>{for(const s of t){const{annotation:t}=s;if(null!=t&&O(e,t))return s}};e.annotationHandleClick=(e,s)=>{const n=H(e,s.threads),r=s.context.fileViewerId;if(null==n)s.dispatch(t.deactivateAllThreads({fileViewerId:r}));else{const{file:e}=s.context.getPluginData();s.dispatch(t.activateThread({fileId:e.fileId,sharedLinkURL:e.url,fileViewerId:r,threadId:n.id,isThirdParty:n.isThirdParty}))}},e.handleHoverPointChange=(e,s)=>{if(null==s)return;const n=e.context.fileViewerId,r=H(s,e.threads);null==r?e.dispatch(t.hoverThread(n,null)):"annotating"!==e.annotationState&&e.dispatch(t.hoverThread(n,r.id))}}));
//# sourceMappingURL=c_comments2_annotations_annotation_layer.js-vflmVc3Qw.map
