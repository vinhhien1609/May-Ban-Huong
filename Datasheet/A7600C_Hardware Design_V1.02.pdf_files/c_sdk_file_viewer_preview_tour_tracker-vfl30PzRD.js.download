define(["exports","react","./e_file_viewer_edison_shmodel_file_async","./c_combinations_index","./c_growth_user_action_tracker"],(function(e,t,r,n,o){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}var i=a(t);const s=r.defineMessages({next:{id:"vDX5oL",defaultMessage:"Next"},done:{id:"qMr5Cv",defaultMessage:"Done"},gotIt:{id:"BLPRra",defaultMessage:"Got it"},showMe:{id:"zvZ1Xs",defaultMessage:"Show me"},skip:{id:"u57o6/",defaultMessage:"Skip"},back:{id:"i27r4u",defaultMessage:"Back"},dismissAria:{id:"nPIreu",defaultMessage:"Dismiss Tooltip"}}),l=r.defineMessage({id:"oDHYJo",defaultMessage:"{currentStep, number} of {totalSteps, number}"}),u={left:0,top:0,width:0,height:0},c=e=>{const t=i.default.useRef();return i.default.useEffect((()=>{t.current=e}),[e]),t.current},d=(e,t="")=>document.querySelector(`[data-tooltip="${e}"] ${t}`),f=({selector:e,title:t,titleFormatter:o,description:a,descriptionFormatter:f,placement:m,primaryButtonType:g,onPrimaryButtonClick:v,onComponentWillAnchor:h,currentStep:_,totalSteps:y,secondaryButtonType:E,onSecondaryButtonClick:T,disableClicksOutside:w=!1,showTooltipIfAnchorUnmounted:x=!0,onTooltipClose:M,withDismiss:k=!1,onDismissClick:C,offsetDistance:b,tooltipExtraProps:S,primaryButtonExtraProps:B,secondaryButtonExtraProps:I})=>{const P=i.default.useRef(null),A=i.default.useRef({node:null,selector:""}),D=i.default.useRef(null),[R,O]=i.default.useState(u),$=i.default.useRef(u),[j,L]=i.default.useState(!1),G=r.useIntl();i.default.useEffect((()=>{h&&h();const t=setInterval((()=>{var t,r;if(!A.current.node||A.current.selector!==e){const t=d(e);t&&(A.current.node=t,A.current.selector=e)}if(null===(t=A.current.node)||void 0===t?void 0:t.getBoundingClientRect){const{left:e,top:t,width:n,height:o}=A.current.node.getBoundingClientRect(),a=[e,t,n,o].every((e=>0===e));if(L(!a),a)return;$.current.left===e&&$.current.top===t&&$.current.width===n&&$.current.height===o||(O({left:e,top:t,width:n,height:o}),$.current={left:e,top:t,width:n,height:o},null===(r=P.current)||void 0===r||r.update())}}),125);return()=>clearInterval(t)}),[e]),i.default.useEffect((()=>{var e;null===(e=P.current)||void 0===e||e.update()}),[_]);const{left:N,top:F,width:U,height:q}=R,z=((e,t,r,n)=>!(!r&&!n)&&e===t)(e,A.current.selector,x,j),W=c(z),X=c(_);i.default.useEffect((()=>{W&&!z&&X===_&&(null==M||M())}),[W,z,X,_,M]);const H=w&&z,J=void 0!==_&&void 0!==y;return i.default.createElement(r.LayerContext.Provider,{value:{zIndex:501}},i.default.createElement(p,{disableClicksOutside:H},i.default.createElement(r.Layer,{isPortaled:!0},i.default.createElement("span",{ref:D,style:{visibility:"hidden",position:"fixed",left:`${N}px`,top:`${F}px`,width:`${U}px`,height:`${q}px`}})),i.default.createElement(r.Tooltip.Control,Object.assign({},S,{variant:"rich",open:z,placement:m,auto:!0,ref:P,triggerRef:D,offsetDistance:b}),t&&i.default.createElement(r.Title,{inverse:!0},G.formatMessage(t,o)),k&&i.default.createElement("span",{style:{position:"absolute",top:"var(--spacing__unit--0_5)",right:"var(--spacing__unit--0_5)"}},i.default.createElement(r.IconButton,{inverse:!0,variant:"transparent",onClick:C},i.default.createElement(r.UIIcon,{src:r.CloseLine,"aria-label":G.formatMessage(s.dismissAria)}))),i.default.createElement(r.Text,{tagName:"p",inverse:!0},G.formatMessage(a,f)),i.default.createElement("div",{style:{display:"flex",justifyContent:J?"space-between":"flex-end",alignItems:"center",marginTop:"var(--spacing__unit--2)",flexWrap:"wrap",rowGap:"var(--spacing__unit--2)"}},J&&i.default.createElement(r.Text,{color:"faint",inverse:!0},G.formatMessage(l,{currentStep:_,totalSteps:y})),i.default.createElement(n.ButtonGroup,null,(({getButtonProps:e})=>i.default.createElement("div",{style:{display:"flex",alignItems:"center"}},E&&T&&i.default.createElement(r.Button,Object.assign({},e({variant:"transparent"}),{onClick:T,inverse:!0},I),G.formatMessage("back"===E?s.back:s.skip)),i.default.createElement(r.Button,Object.assign({},e({variant:"outline"}),{onClick:v,inverse:!0},B),G.formatMessage("next"===g?s.next:"done"===g?s.done:"showMe"===g?s.showMe:s.gotIt)))))))))};f.displayName="ActivationTooltip";const p=({disableClicksOutside:e,children:t})=>e?i.default.createElement("div",{style:{position:"fixed",inset:0,backgroundColor:"var(--color__utility__overlay)"}},t):i.default.createElement(i.default.Fragment,null,t);var m;e.PreviewTooltipTourActions=void 0,(m=e.PreviewTooltipTourActions||(e.PreviewTooltipTourActions={})).DISMISS="dismiss",m.START="start";class g extends o.GrowthUserActionTracker{constructor(){super(...arguments),this.project="preview_tooltip_tour"}}e.ActivationTooltip=f,e.PreviewTooltipTourTracker=g,e.getNodeByTooltipDataSelector=d}));
//# sourceMappingURL=c_sdk_file_viewer_preview_tour_tracker.js-vflacilun.map
