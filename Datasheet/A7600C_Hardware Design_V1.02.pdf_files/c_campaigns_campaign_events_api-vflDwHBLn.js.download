define(["exports","./c_tslib","react","./e_core_exception","./e_file_viewer_edison_shmodel_file_async","./c_core_exception_info"],(function(e,n,i,t,a,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function c({err:e,severity:n=r.SEVERITY.NONCRITICAL,exc_extra:i={}}){t.reportException({err:e,tags:["megaphone","robe"],severity:n,exc_extra:i})}function o(e,n,i){const t=new a.UserApiV2Client,r={megaphone_impression_id:e.campaignImpressionId,megaphone_request_context:{user_id:e.userId},campaign_event_name:n,campaign_event_info:i,campaign_id:_(e.campaignId),version_id:_(e.campaignVariantId)};return t.ns("megaphone").rpc("log_campaign_event",r,{subjectUserId:e.userId}).catch((i=>{c({err:i,exc_extra:{user_id:e.userId,impression_id:e.campaignImpressionId,event_name:n[".tag"]}})}))}function _(e){switch(typeof e){case"string":return parseInt(e,10);case"number":return e;default:return}}s(i).default.createContext(void 0),e.createMegaphoneCampaignImpressionContext=function(e,n,i){let t;try{t={campaignId:n,campaignVariantId:i,campaignImpressionId:e,userId:a.mustGetActiveUserId()}}catch(e){c({err:e})}return t},e.logCampaignClick=function(e,n){return o(e,{".tag":"click"},{cta_id:n})},e.logCampaignDismissed=function(e){return o(e,{".tag":"dismissed"})},e.logCampaignImpression=function(e){return o(e,{".tag":"impression"})},e.setCampaignDismissedInUserMetadata=function(e,i,t){return n.__awaiter(this,void 0,void 0,(function*(){if(e)try{const{CAMPAIGNS_TOOLKIT_USER_DISMISSED_CAMPAIGNS:n}=yield a.getUserMetadata(["CAMPAIGNS_TOOLKIT_USER_DISMISSED_CAMPAIGNS"],t),i=new Set(n?n.split(":"):"").add(`${e}`),r=Array.from(i).join(":");yield a.setUserMetadata({CAMPAIGNS_TOOLKIT_USER_DISMISSED_CAMPAIGNS:r},t)}catch(n){c({err:n,exc_extra:{user_id:t,impression_id:i,campaign_id:e,event_name:"setCampaignDismissedInUserMetadata"}})}}))}}));
//# sourceMappingURL=c_campaigns_campaign_events_api.js-vfll9fR8Z.map
