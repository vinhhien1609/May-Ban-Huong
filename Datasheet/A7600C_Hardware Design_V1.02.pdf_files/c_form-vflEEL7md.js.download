define(["exports","./e_file_viewer_edison_shmodel_file_async","./c_csrf","./e_edison","./c_core_i18n"],(function(e,t,r,n,s){"use strict";const i=s.intl.formatMessage({id:"bLA3rA",defaultMessage:"There was a problem completing this request."});function o(e){const t={};return Array.from(e.querySelectorAll("input, select, textarea")).forEach((e=>{const r=e.name;if(r){let n;if("checkbox"===e.type)n=e.checked?"True":"";else if("radio"===e.type){if(!e.checked)return;n=e.value}else n=e.value;r in t?("string"==typeof t[r]&&(t[r]=[t[r]]),t[r].push(n)):t[r]=n}})),t}function c(e,t={},n={}){const s=document.createElement("form");return s.style.display="none",s.setAttribute("action",e),s.setAttribute("method","POST"),n.target&&s.setAttribute("target",n.target),t.t=r.Cookies.read("__Host-js_csrf"),function(e,t,r=!1){Object.entries(t||{}).forEach((([t,n])=>{var s;if(!0===r){const r=e.querySelector(`input[name="${t}"]`);null===(s=null==r?void 0:r.parentElement)||void 0===s||s.removeChild(r)}const i=document.createElement("input");i.setAttribute("type","hidden"),i.setAttribute("name",t),i.setAttribute("value",n),e.appendChild(i)}))}(s,t),s}e.post_request=function(e,t={},r={}){n.assert(null!=e,"post_request missing action");const s=c(e,t,r);document.body.appendChild(s),s.submit()},e.submit=function(e,r,n,s){return t.FormWebRequest({url:e.getAttribute("action"),data:o(e),skipErrorHandling:!0,success(e,t,s){const[o,c]=Array.from(function(e){if(0!==e.indexOf("err:"))return[!0,e];const t=e.substr(4);try{return[!1,JSON.parse(t)]}catch(e){return[!1,t||i]}}(s.responseText));return o?r(c):n(c)},error:(e,t,r)=>n(i),complete:s})}}));
//# sourceMappingURL=c_form.js-vfl63dbME.map
