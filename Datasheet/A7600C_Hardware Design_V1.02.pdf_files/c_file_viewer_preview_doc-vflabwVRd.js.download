define(["exports","react","./e_file_viewer_edison_shmodel_file_async","./c_file_viewer_preview_core","./c_tslib","./c_file_viewer_core_kmp_search","./c_lodash-es_lodash","./c_core_utils_sizing_utils","./c_file_viewer_ui_header2","./c_file_viewer_ui_header","./e_edison","./c_apex-metrics_src_types","./e_core_exception","./c_core_exception_info","./c_core_i18n","./c_src_sink_index","./c_init_data_runtime","metaserver/static/js/modules/constants/page_load","metaserver/static/js/modules/constants/request","metaserver/static/js/langpack","./c_core_notify","react-dom","metaserver/static/js/modules/constants/env","metaserver/static/js/modules/constants/viewer","./c_core_xhr","./c_csrf","metaserver/static/js/modules/constants/web_experience_constants","metaserver/static/js/modules/constants/locales","metaserver/static/js/modules/constants/file_viewer_configuration","metaserver/static/js/modules/constants/file_viewer_feature_experiments","metaserver/static/js/modules/constants/fingerprintjs_constants","metaserver/static/js/modules/constants/sharing","./c_security_util","metaserver/static/js/modules/constants/login_and_register","metaserver/static/js/modules/constants/pdf_editing","metaserver/static/js/modules/constants/time","metaserver/static/js/modules/constants/contacts","metaserver/static/js/modules/constants/search","metaserver/static/js/modules/constants/unity","metaserver/static/js/modules/constants/files_spa","./c_ui-icon_external-logo_twitter"],(function(e,t,n,i,a,r,s,o,l,c,d,g,h,u,p,f,m,v,b,L,N,w,A,x,S,P,I,E,_,C,y,D,M,F,k,O,T,B,R,U,H){"use strict";function j(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var K=j(t);const V=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","ON","ON","ET","ET","ET","ON","ON","ON","ON","ON","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","ON","ON","ON","ON","ON","ON","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","ON","ON","ON","ON","ON","ON","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","ON","ON","ON","ON","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","ON","ET","ET","ET","ET","ON","ON","ON","ON","L","ON","ON","BN","ON","ON","ET","ET","EN","EN","ON","L","ON","ON","ON","EN","L","ON","ON","ON","ON","ON","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","ON","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","ON","L","L","L","L","L","L","L","L"],z=["AN","AN","AN","AN","AN","AN","ON","ON","AL","ET","ET","AL","CS","AL","ON","ON","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","ON","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","ON","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL"];function W(e){return 0!=(1&e)}function $(e){return 0==(1&e)}function q(e,t,n){for(var i=t,a=e.length;i<a;++i)if(e[i]!==n)return i;return i}function G(e,t,n,i){for(var a=t;a<n;++a)e[a]=i}function X(e,t,n){for(var i=t,a=n-1;i<a;++i,--a){var r=e[i];e[i]=e[a],e[a]=r}}function J(e,t,n){return{str:e,dir:n?"ttb":t?"ltr":"rtl"}}let Y=[],Z=[];function Q(e){var t;return function(){return e&&(t=Object.create(null),e(t),e=null),t}}Q((function(e){e[63721]=169,e[63193]=169,e[63720]=174,e[63194]=174,e[63722]=8482,e[63195]=8482,e[63729]=9127,e[63730]=9128,e[63731]=9129,e[63740]=9131,e[63741]=9132,e[63742]=9133,e[63726]=9121,e[63727]=9122,e[63728]=9123,e[63737]=9124,e[63738]=9125,e[63739]=9126,e[63723]=9115,e[63724]=9116,e[63725]=9117,e[63734]=9118,e[63735]=9119,e[63736]=9120}));var ee=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}];var te,ne,ie=Q((function(e){e["¨"]=" ̈",e["¯"]=" ̄",e["´"]=" ́",e["µ"]="μ",e["¸"]=" ̧",e["Ĳ"]="IJ",e["ĳ"]="ij",e["Ŀ"]="L·",e["ŀ"]="l·",e["ŉ"]="ʼn",e["ſ"]="s",e["Ǆ"]="DŽ",e["ǅ"]="Dž",e["ǆ"]="dž",e["Ǉ"]="LJ",e["ǈ"]="Lj",e["ǉ"]="lj",e["Ǌ"]="NJ",e["ǋ"]="Nj",e["ǌ"]="nj",e["Ǳ"]="DZ",e["ǲ"]="Dz",e["ǳ"]="dz",e["˘"]=" ̆",e["˙"]=" ̇",e["˚"]=" ̊",e["˛"]=" ̨",e["˜"]=" ̃",e["˝"]=" ̋",e["ͺ"]=" ͅ",e["΄"]=" ́",e["ϐ"]="β",e["ϑ"]="θ",e["ϒ"]="Υ",e["ϕ"]="φ",e["ϖ"]="π",e["ϰ"]="κ",e["ϱ"]="ρ",e["ϲ"]="ς",e["ϴ"]="Θ",e["ϵ"]="ε",e["Ϲ"]="Σ",e["և"]="եւ",e["ٵ"]="اٴ",e["ٶ"]="وٴ",e["ٷ"]="ۇٴ",e["ٸ"]="يٴ",e["ำ"]="ํา",e["ຳ"]="ໍາ",e["ໜ"]="ຫນ",e["ໝ"]="ຫມ",e["ཷ"]="ྲཱྀ",e["ཹ"]="ླཱྀ",e["ẚ"]="aʾ",e["᾽"]=" ̓",e["᾿"]=" ̓",e["῀"]=" ͂",e["῾"]=" ̔",e[" "]=" ",e[" "]=" ",e[" "]=" ",e[" "]=" ",e[" "]=" ",e[" "]=" ",e[" "]=" ",e[" "]=" ",e["‗"]=" ̳",e["․"]=".",e["‥"]="..",e["…"]="...",e["″"]="′′",e["‴"]="′′′",e["‶"]="‵‵",e["‷"]="‵‵‵",e["‼"]="!!",e["‾"]=" ̅",e["⁇"]="??",e["⁈"]="?!",e["⁉"]="!?",e["⁗"]="′′′′",e[" "]=" ",e["₨"]="Rs",e["℀"]="a/c",e["℁"]="a/s",e["℃"]="°C",e["℅"]="c/o",e["℆"]="c/u",e["ℇ"]="Ɛ",e["℉"]="°F",e["№"]="No",e["℡"]="TEL",e["ℵ"]="א",e["ℶ"]="ב",e["ℷ"]="ג",e["ℸ"]="ד",e["℻"]="FAX",e["Ⅰ"]="I",e["Ⅱ"]="II",e["Ⅲ"]="III",e["Ⅳ"]="IV",e["Ⅴ"]="V",e["Ⅵ"]="VI",e["Ⅶ"]="VII",e["Ⅷ"]="VIII",e["Ⅸ"]="IX",e["Ⅹ"]="X",e["Ⅺ"]="XI",e["Ⅻ"]="XII",e["Ⅼ"]="L",e["Ⅽ"]="C",e["Ⅾ"]="D",e["Ⅿ"]="M",e["ⅰ"]="i",e["ⅱ"]="ii",e["ⅲ"]="iii",e["ⅳ"]="iv",e["ⅴ"]="v",e["ⅵ"]="vi",e["ⅶ"]="vii",e["ⅷ"]="viii",e["ⅸ"]="ix",e["ⅹ"]="x",e["ⅺ"]="xi",e["ⅻ"]="xii",e["ⅼ"]="l",e["ⅽ"]="c",e["ⅾ"]="d",e["ⅿ"]="m",e["∬"]="∫∫",e["∭"]="∫∫∫",e["∯"]="∮∮",e["∰"]="∮∮∮",e["⑴"]="(1)",e["⑵"]="(2)",e["⑶"]="(3)",e["⑷"]="(4)",e["⑸"]="(5)",e["⑹"]="(6)",e["⑺"]="(7)",e["⑻"]="(8)",e["⑼"]="(9)",e["⑽"]="(10)",e["⑾"]="(11)",e["⑿"]="(12)",e["⒀"]="(13)",e["⒁"]="(14)",e["⒂"]="(15)",e["⒃"]="(16)",e["⒄"]="(17)",e["⒅"]="(18)",e["⒆"]="(19)",e["⒇"]="(20)",e["⒈"]="1.",e["⒉"]="2.",e["⒊"]="3.",e["⒋"]="4.",e["⒌"]="5.",e["⒍"]="6.",e["⒎"]="7.",e["⒏"]="8.",e["⒐"]="9.",e["⒑"]="10.",e["⒒"]="11.",e["⒓"]="12.",e["⒔"]="13.",e["⒕"]="14.",e["⒖"]="15.",e["⒗"]="16.",e["⒘"]="17.",e["⒙"]="18.",e["⒚"]="19.",e["⒛"]="20.",e["⒜"]="(a)",e["⒝"]="(b)",e["⒞"]="(c)",e["⒟"]="(d)",e["⒠"]="(e)",e["⒡"]="(f)",e["⒢"]="(g)",e["⒣"]="(h)",e["⒤"]="(i)",e["⒥"]="(j)",e["⒦"]="(k)",e["⒧"]="(l)",e["⒨"]="(m)",e["⒩"]="(n)",e["⒪"]="(o)",e["⒫"]="(p)",e["⒬"]="(q)",e["⒭"]="(r)",e["⒮"]="(s)",e["⒯"]="(t)",e["⒰"]="(u)",e["⒱"]="(v)",e["⒲"]="(w)",e["⒳"]="(x)",e["⒴"]="(y)",e["⒵"]="(z)",e["⨌"]="∫∫∫∫",e["⩴"]="::=",e["⩵"]="==",e["⩶"]="===",e["⺟"]="母",e["⻳"]="龟",e["⼀"]="一",e["⼁"]="丨",e["⼂"]="丶",e["⼃"]="丿",e["⼄"]="乙",e["⼅"]="亅",e["⼆"]="二",e["⼇"]="亠",e["⼈"]="人",e["⼉"]="儿",e["⼊"]="入",e["⼋"]="八",e["⼌"]="冂",e["⼍"]="冖",e["⼎"]="冫",e["⼏"]="几",e["⼐"]="凵",e["⼑"]="刀",e["⼒"]="力",e["⼓"]="勹",e["⼔"]="匕",e["⼕"]="匚",e["⼖"]="匸",e["⼗"]="十",e["⼘"]="卜",e["⼙"]="卩",e["⼚"]="厂",e["⼛"]="厶",e["⼜"]="又",e["⼝"]="口",e["⼞"]="囗",e["⼟"]="土",e["⼠"]="士",e["⼡"]="夂",e["⼢"]="夊",e["⼣"]="夕",e["⼤"]="大",e["⼥"]="女",e["⼦"]="子",e["⼧"]="宀",e["⼨"]="寸",e["⼩"]="小",e["⼪"]="尢",e["⼫"]="尸",e["⼬"]="屮",e["⼭"]="山",e["⼮"]="巛",e["⼯"]="工",e["⼰"]="己",e["⼱"]="巾",e["⼲"]="干",e["⼳"]="幺",e["⼴"]="广",e["⼵"]="廴",e["⼶"]="廾",e["⼷"]="弋",e["⼸"]="弓",e["⼹"]="彐",e["⼺"]="彡",e["⼻"]="彳",e["⼼"]="心",e["⼽"]="戈",e["⼾"]="戶",e["⼿"]="手",e["⽀"]="支",e["⽁"]="攴",e["⽂"]="文",e["⽃"]="斗",e["⽄"]="斤",e["⽅"]="方",e["⽆"]="无",e["⽇"]="日",e["⽈"]="曰",e["⽉"]="月",e["⽊"]="木",e["⽋"]="欠",e["⽌"]="止",e["⽍"]="歹",e["⽎"]="殳",e["⽏"]="毋",e["⽐"]="比",e["⽑"]="毛",e["⽒"]="氏",e["⽓"]="气",e["⽔"]="水",e["⽕"]="火",e["⽖"]="爪",e["⽗"]="父",e["⽘"]="爻",e["⽙"]="爿",e["⽚"]="片",e["⽛"]="牙",e["⽜"]="牛",e["⽝"]="犬",e["⽞"]="玄",e["⽟"]="玉",e["⽠"]="瓜",e["⽡"]="瓦",e["⽢"]="甘",e["⽣"]="生",e["⽤"]="用",e["⽥"]="田",e["⽦"]="疋",e["⽧"]="疒",e["⽨"]="癶",e["⽩"]="白",e["⽪"]="皮",e["⽫"]="皿",e["⽬"]="目",e["⽭"]="矛",e["⽮"]="矢",e["⽯"]="石",e["⽰"]="示",e["⽱"]="禸",e["⽲"]="禾",e["⽳"]="穴",e["⽴"]="立",e["⽵"]="竹",e["⽶"]="米",e["⽷"]="糸",e["⽸"]="缶",e["⽹"]="网",e["⽺"]="羊",e["⽻"]="羽",e["⽼"]="老",e["⽽"]="而",e["⽾"]="耒",e["⽿"]="耳",e["⾀"]="聿",e["⾁"]="肉",e["⾂"]="臣",e["⾃"]="自",e["⾄"]="至",e["⾅"]="臼",e["⾆"]="舌",e["⾇"]="舛",e["⾈"]="舟",e["⾉"]="艮",e["⾊"]="色",e["⾋"]="艸",e["⾌"]="虍",e["⾍"]="虫",e["⾎"]="血",e["⾏"]="行",e["⾐"]="衣",e["⾑"]="襾",e["⾒"]="見",e["⾓"]="角",e["⾔"]="言",e["⾕"]="谷",e["⾖"]="豆",e["⾗"]="豕",e["⾘"]="豸",e["⾙"]="貝",e["⾚"]="赤",e["⾛"]="走",e["⾜"]="足",e["⾝"]="身",e["⾞"]="車",e["⾟"]="辛",e["⾠"]="辰",e["⾡"]="辵",e["⾢"]="邑",e["⾣"]="酉",e["⾤"]="釆",e["⾥"]="里",e["⾦"]="金",e["⾧"]="長",e["⾨"]="門",e["⾩"]="阜",e["⾪"]="隶",e["⾫"]="隹",e["⾬"]="雨",e["⾭"]="靑",e["⾮"]="非",e["⾯"]="面",e["⾰"]="革",e["⾱"]="韋",e["⾲"]="韭",e["⾳"]="音",e["⾴"]="頁",e["⾵"]="風",e["⾶"]="飛",e["⾷"]="食",e["⾸"]="首",e["⾹"]="香",e["⾺"]="馬",e["⾻"]="骨",e["⾼"]="高",e["⾽"]="髟",e["⾾"]="鬥",e["⾿"]="鬯",e["⿀"]="鬲",e["⿁"]="鬼",e["⿂"]="魚",e["⿃"]="鳥",e["⿄"]="鹵",e["⿅"]="鹿",e["⿆"]="麥",e["⿇"]="麻",e["⿈"]="黃",e["⿉"]="黍",e["⿊"]="黑",e["⿋"]="黹",e["⿌"]="黽",e["⿍"]="鼎",e["⿎"]="鼓",e["⿏"]="鼠",e["⿐"]="鼻",e["⿑"]="齊",e["⿒"]="齒",e["⿓"]="龍",e["⿔"]="龜",e["⿕"]="龠",e["〶"]="〒",e["〸"]="十",e["〹"]="卄",e["〺"]="卅",e["゛"]=" ゙",e["゜"]=" ゚",e["ㄱ"]="ᄀ",e["ㄲ"]="ᄁ",e["ㄳ"]="ᆪ",e["ㄴ"]="ᄂ",e["ㄵ"]="ᆬ",e["ㄶ"]="ᆭ",e["ㄷ"]="ᄃ",e["ㄸ"]="ᄄ",e["ㄹ"]="ᄅ",e["ㄺ"]="ᆰ",e["ㄻ"]="ᆱ",e["ㄼ"]="ᆲ",e["ㄽ"]="ᆳ",e["ㄾ"]="ᆴ",e["ㄿ"]="ᆵ",e["ㅀ"]="ᄚ",e["ㅁ"]="ᄆ",e["ㅂ"]="ᄇ",e["ㅃ"]="ᄈ",e["ㅄ"]="ᄡ",e["ㅅ"]="ᄉ",e["ㅆ"]="ᄊ",e["ㅇ"]="ᄋ",e["ㅈ"]="ᄌ",e["ㅉ"]="ᄍ",e["ㅊ"]="ᄎ",e["ㅋ"]="ᄏ",e["ㅌ"]="ᄐ",e["ㅍ"]="ᄑ",e["ㅎ"]="ᄒ",e["ㅏ"]="ᅡ",e["ㅐ"]="ᅢ",e["ㅑ"]="ᅣ",e["ㅒ"]="ᅤ",e["ㅓ"]="ᅥ",e["ㅔ"]="ᅦ",e["ㅕ"]="ᅧ",e["ㅖ"]="ᅨ",e["ㅗ"]="ᅩ",e["ㅘ"]="ᅪ",e["ㅙ"]="ᅫ",e["ㅚ"]="ᅬ",e["ㅛ"]="ᅭ",e["ㅜ"]="ᅮ",e["ㅝ"]="ᅯ",e["ㅞ"]="ᅰ",e["ㅟ"]="ᅱ",e["ㅠ"]="ᅲ",e["ㅡ"]="ᅳ",e["ㅢ"]="ᅴ",e["ㅣ"]="ᅵ",e["ㅤ"]="ᅠ",e["ㅥ"]="ᄔ",e["ㅦ"]="ᄕ",e["ㅧ"]="ᇇ",e["ㅨ"]="ᇈ",e["ㅩ"]="ᇌ",e["ㅪ"]="ᇎ",e["ㅫ"]="ᇓ",e["ㅬ"]="ᇗ",e["ㅭ"]="ᇙ",e["ㅮ"]="ᄜ",e["ㅯ"]="ᇝ",e["ㅰ"]="ᇟ",e["ㅱ"]="ᄝ",e["ㅲ"]="ᄞ",e["ㅳ"]="ᄠ",e["ㅴ"]="ᄢ",e["ㅵ"]="ᄣ",e["ㅶ"]="ᄧ",e["ㅷ"]="ᄩ",e["ㅸ"]="ᄫ",e["ㅹ"]="ᄬ",e["ㅺ"]="ᄭ",e["ㅻ"]="ᄮ",e["ㅼ"]="ᄯ",e["ㅽ"]="ᄲ",e["ㅾ"]="ᄶ",e["ㅿ"]="ᅀ",e["ㆀ"]="ᅇ",e["ㆁ"]="ᅌ",e["ㆂ"]="ᇱ",e["ㆃ"]="ᇲ",e["ㆄ"]="ᅗ",e["ㆅ"]="ᅘ",e["ㆆ"]="ᅙ",e["ㆇ"]="ᆄ",e["ㆈ"]="ᆅ",e["ㆉ"]="ᆈ",e["ㆊ"]="ᆑ",e["ㆋ"]="ᆒ",e["ㆌ"]="ᆔ",e["ㆍ"]="ᆞ",e["ㆎ"]="ᆡ",e["㈀"]="(ᄀ)",e["㈁"]="(ᄂ)",e["㈂"]="(ᄃ)",e["㈃"]="(ᄅ)",e["㈄"]="(ᄆ)",e["㈅"]="(ᄇ)",e["㈆"]="(ᄉ)",e["㈇"]="(ᄋ)",e["㈈"]="(ᄌ)",e["㈉"]="(ᄎ)",e["㈊"]="(ᄏ)",e["㈋"]="(ᄐ)",e["㈌"]="(ᄑ)",e["㈍"]="(ᄒ)",e["㈎"]="(가)",e["㈏"]="(나)",e["㈐"]="(다)",e["㈑"]="(라)",e["㈒"]="(마)",e["㈓"]="(바)",e["㈔"]="(사)",e["㈕"]="(아)",e["㈖"]="(자)",e["㈗"]="(차)",e["㈘"]="(카)",e["㈙"]="(타)",e["㈚"]="(파)",e["㈛"]="(하)",e["㈜"]="(주)",e["㈝"]="(오전)",e["㈞"]="(오후)",e["㈠"]="(一)",e["㈡"]="(二)",e["㈢"]="(三)",e["㈣"]="(四)",e["㈤"]="(五)",e["㈥"]="(六)",e["㈦"]="(七)",e["㈧"]="(八)",e["㈨"]="(九)",e["㈩"]="(十)",e["㈪"]="(月)",e["㈫"]="(火)",e["㈬"]="(水)",e["㈭"]="(木)",e["㈮"]="(金)",e["㈯"]="(土)",e["㈰"]="(日)",e["㈱"]="(株)",e["㈲"]="(有)",e["㈳"]="(社)",e["㈴"]="(名)",e["㈵"]="(特)",e["㈶"]="(財)",e["㈷"]="(祝)",e["㈸"]="(労)",e["㈹"]="(代)",e["㈺"]="(呼)",e["㈻"]="(学)",e["㈼"]="(監)",e["㈽"]="(企)",e["㈾"]="(資)",e["㈿"]="(協)",e["㉀"]="(祭)",e["㉁"]="(休)",e["㉂"]="(自)",e["㉃"]="(至)",e["㋀"]="1月",e["㋁"]="2月",e["㋂"]="3月",e["㋃"]="4月",e["㋄"]="5月",e["㋅"]="6月",e["㋆"]="7月",e["㋇"]="8月",e["㋈"]="9月",e["㋉"]="10月",e["㋊"]="11月",e["㋋"]="12月",e["㍘"]="0点",e["㍙"]="1点",e["㍚"]="2点",e["㍛"]="3点",e["㍜"]="4点",e["㍝"]="5点",e["㍞"]="6点",e["㍟"]="7点",e["㍠"]="8点",e["㍡"]="9点",e["㍢"]="10点",e["㍣"]="11点",e["㍤"]="12点",e["㍥"]="13点",e["㍦"]="14点",e["㍧"]="15点",e["㍨"]="16点",e["㍩"]="17点",e["㍪"]="18点",e["㍫"]="19点",e["㍬"]="20点",e["㍭"]="21点",e["㍮"]="22点",e["㍯"]="23点",e["㍰"]="24点",e["㏠"]="1日",e["㏡"]="2日",e["㏢"]="3日",e["㏣"]="4日",e["㏤"]="5日",e["㏥"]="6日",e["㏦"]="7日",e["㏧"]="8日",e["㏨"]="9日",e["㏩"]="10日",e["㏪"]="11日",e["㏫"]="12日",e["㏬"]="13日",e["㏭"]="14日",e["㏮"]="15日",e["㏯"]="16日",e["㏰"]="17日",e["㏱"]="18日",e["㏲"]="19日",e["㏳"]="20日",e["㏴"]="21日",e["㏵"]="22日",e["㏶"]="23日",e["㏷"]="24日",e["㏸"]="25日",e["㏹"]="26日",e["㏺"]="27日",e["㏻"]="28日",e["㏼"]="29日",e["㏽"]="30日",e["㏾"]="31日",e["ﬀ"]="ff",e["ﬁ"]="fi",e["ﬂ"]="fl",e["ﬃ"]="ffi",e["ﬄ"]="ffl",e["ﬅ"]="ſt",e["ﬆ"]="st",e["ﬓ"]="մն",e["ﬔ"]="մե",e["ﬕ"]="մի",e["ﬖ"]="վն",e["ﬗ"]="մխ",e["ﭏ"]="אל",e["ﭐ"]="ٱ",e["ﭑ"]="ٱ",e["ﭒ"]="ٻ",e["ﭓ"]="ٻ",e["ﭔ"]="ٻ",e["ﭕ"]="ٻ",e["ﭖ"]="پ",e["ﭗ"]="پ",e["ﭘ"]="پ",e["ﭙ"]="پ",e["ﭚ"]="ڀ",e["ﭛ"]="ڀ",e["ﭜ"]="ڀ",e["ﭝ"]="ڀ",e["ﭞ"]="ٺ",e["ﭟ"]="ٺ",e["ﭠ"]="ٺ",e["ﭡ"]="ٺ",e["ﭢ"]="ٿ",e["ﭣ"]="ٿ",e["ﭤ"]="ٿ",e["ﭥ"]="ٿ",e["ﭦ"]="ٹ",e["ﭧ"]="ٹ",e["ﭨ"]="ٹ",e["ﭩ"]="ٹ",e["ﭪ"]="ڤ",e["ﭫ"]="ڤ",e["ﭬ"]="ڤ",e["ﭭ"]="ڤ",e["ﭮ"]="ڦ",e["ﭯ"]="ڦ",e["ﭰ"]="ڦ",e["ﭱ"]="ڦ",e["ﭲ"]="ڄ",e["ﭳ"]="ڄ",e["ﭴ"]="ڄ",e["ﭵ"]="ڄ",e["ﭶ"]="ڃ",e["ﭷ"]="ڃ",e["ﭸ"]="ڃ",e["ﭹ"]="ڃ",e["ﭺ"]="چ",e["ﭻ"]="چ",e["ﭼ"]="چ",e["ﭽ"]="چ",e["ﭾ"]="ڇ",e["ﭿ"]="ڇ",e["ﮀ"]="ڇ",e["ﮁ"]="ڇ",e["ﮂ"]="ڍ",e["ﮃ"]="ڍ",e["ﮄ"]="ڌ",e["ﮅ"]="ڌ",e["ﮆ"]="ڎ",e["ﮇ"]="ڎ",e["ﮈ"]="ڈ",e["ﮉ"]="ڈ",e["ﮊ"]="ژ",e["ﮋ"]="ژ",e["ﮌ"]="ڑ",e["ﮍ"]="ڑ",e["ﮎ"]="ک",e["ﮏ"]="ک",e["ﮐ"]="ک",e["ﮑ"]="ک",e["ﮒ"]="گ",e["ﮓ"]="گ",e["ﮔ"]="گ",e["ﮕ"]="گ",e["ﮖ"]="ڳ",e["ﮗ"]="ڳ",e["ﮘ"]="ڳ",e["ﮙ"]="ڳ",e["ﮚ"]="ڱ",e["ﮛ"]="ڱ",e["ﮜ"]="ڱ",e["ﮝ"]="ڱ",e["ﮞ"]="ں",e["ﮟ"]="ں",e["ﮠ"]="ڻ",e["ﮡ"]="ڻ",e["ﮢ"]="ڻ",e["ﮣ"]="ڻ",e["ﮤ"]="ۀ",e["ﮥ"]="ۀ",e["ﮦ"]="ہ",e["ﮧ"]="ہ",e["ﮨ"]="ہ",e["ﮩ"]="ہ",e["ﮪ"]="ھ",e["ﮫ"]="ھ",e["ﮬ"]="ھ",e["ﮭ"]="ھ",e["ﮮ"]="ے",e["ﮯ"]="ے",e["ﮰ"]="ۓ",e["ﮱ"]="ۓ",e["ﯓ"]="ڭ",e["ﯔ"]="ڭ",e["ﯕ"]="ڭ",e["ﯖ"]="ڭ",e["ﯗ"]="ۇ",e["ﯘ"]="ۇ",e["ﯙ"]="ۆ",e["ﯚ"]="ۆ",e["ﯛ"]="ۈ",e["ﯜ"]="ۈ",e["ﯝ"]="ٷ",e["ﯞ"]="ۋ",e["ﯟ"]="ۋ",e["ﯠ"]="ۅ",e["ﯡ"]="ۅ",e["ﯢ"]="ۉ",e["ﯣ"]="ۉ",e["ﯤ"]="ې",e["ﯥ"]="ې",e["ﯦ"]="ې",e["ﯧ"]="ې",e["ﯨ"]="ى",e["ﯩ"]="ى",e["ﯪ"]="ئا",e["ﯫ"]="ئا",e["ﯬ"]="ئە",e["ﯭ"]="ئە",e["ﯮ"]="ئو",e["ﯯ"]="ئو",e["ﯰ"]="ئۇ",e["ﯱ"]="ئۇ",e["ﯲ"]="ئۆ",e["ﯳ"]="ئۆ",e["ﯴ"]="ئۈ",e["ﯵ"]="ئۈ",e["ﯶ"]="ئې";e["ﯷ"]="ئې",e["ﯸ"]="ئې",e["ﯹ"]="ئى",e["ﯺ"]="ئى",e["ﯻ"]="ئى",e["ﯼ"]="ی",e["ﯽ"]="ی",e["ﯾ"]="ی",e["ﯿ"]="ی",e["ﰀ"]="ئج",e["ﰁ"]="ئح",e["ﰂ"]="ئم",e["ﰃ"]="ئى",e["ﰄ"]="ئي",e["ﰅ"]="بج",e["ﰆ"]="بح",e["ﰇ"]="بخ",e["ﰈ"]="بم",e["ﰉ"]="بى",e["ﰊ"]="بي",e["ﰋ"]="تج",e["ﰌ"]="تح",e["ﰍ"]="تخ",e["ﰎ"]="تم",e["ﰏ"]="تى",e["ﰐ"]="تي",e["ﰑ"]="ثج",e["ﰒ"]="ثم",e["ﰓ"]="ثى",e["ﰔ"]="ثي",e["ﰕ"]="جح",e["ﰖ"]="جم",e["ﰗ"]="حج",e["ﰘ"]="حم",e["ﰙ"]="خج",e["ﰚ"]="خح",e["ﰛ"]="خم",e["ﰜ"]="سج",e["ﰝ"]="سح",e["ﰞ"]="سخ",e["ﰟ"]="سم",e["ﰠ"]="صح",e["ﰡ"]="صم",e["ﰢ"]="ضج",e["ﰣ"]="ضح",e["ﰤ"]="ضخ",e["ﰥ"]="ضم",e["ﰦ"]="طح",e["ﰧ"]="طم",e["ﰨ"]="ظم",e["ﰩ"]="عج",e["ﰪ"]="عم",e["ﰫ"]="غج",e["ﰬ"]="غم",e["ﰭ"]="فج",e["ﰮ"]="فح",e["ﰯ"]="فخ",e["ﰰ"]="فم",e["ﰱ"]="فى",e["ﰲ"]="في",e["ﰳ"]="قح",e["ﰴ"]="قم",e["ﰵ"]="قى",e["ﰶ"]="قي",e["ﰷ"]="كا",e["ﰸ"]="كج",e["ﰹ"]="كح",e["ﰺ"]="كخ",e["ﰻ"]="كل",e["ﰼ"]="كم",e["ﰽ"]="كى",e["ﰾ"]="كي",e["ﰿ"]="لج",e["ﱀ"]="لح",e["ﱁ"]="لخ",e["ﱂ"]="لم",e["ﱃ"]="لى",e["ﱄ"]="لي",e["ﱅ"]="مج",e["ﱆ"]="مح",e["ﱇ"]="مخ",e["ﱈ"]="مم",e["ﱉ"]="مى",e["ﱊ"]="مي",e["ﱋ"]="نج",e["ﱌ"]="نح",e["ﱍ"]="نخ",e["ﱎ"]="نم",e["ﱏ"]="نى",e["ﱐ"]="ني",e["ﱑ"]="هج",e["ﱒ"]="هم",e["ﱓ"]="هى",e["ﱔ"]="هي",e["ﱕ"]="يج",e["ﱖ"]="يح",e["ﱗ"]="يخ",e["ﱘ"]="يم",e["ﱙ"]="يى",e["ﱚ"]="يي",e["ﱛ"]="ذٰ",e["ﱜ"]="رٰ",e["ﱝ"]="ىٰ",e["ﱞ"]=" ٌّ",e["ﱟ"]=" ٍّ",e["ﱠ"]=" َّ",e["ﱡ"]=" ُّ",e["ﱢ"]=" ِّ",e["ﱣ"]=" ّٰ",e["ﱤ"]="ئر",e["ﱥ"]="ئز",e["ﱦ"]="ئم",e["ﱧ"]="ئن",e["ﱨ"]="ئى",e["ﱩ"]="ئي",e["ﱪ"]="بر",e["ﱫ"]="بز",e["ﱬ"]="بم",e["ﱭ"]="بن",e["ﱮ"]="بى",e["ﱯ"]="بي",e["ﱰ"]="تر",e["ﱱ"]="تز",e["ﱲ"]="تم",e["ﱳ"]="تن",e["ﱴ"]="تى",e["ﱵ"]="تي",e["ﱶ"]="ثر",e["ﱷ"]="ثز",e["ﱸ"]="ثم",e["ﱹ"]="ثن",e["ﱺ"]="ثى",e["ﱻ"]="ثي",e["ﱼ"]="فى",e["ﱽ"]="في",e["ﱾ"]="قى",e["ﱿ"]="قي",e["ﲀ"]="كا",e["ﲁ"]="كل",e["ﲂ"]="كم",e["ﲃ"]="كى",e["ﲄ"]="كي",e["ﲅ"]="لم",e["ﲆ"]="لى",e["ﲇ"]="لي",e["ﲈ"]="ما",e["ﲉ"]="مم",e["ﲊ"]="نر",e["ﲋ"]="نز",e["ﲌ"]="نم",e["ﲍ"]="نن",e["ﲎ"]="نى",e["ﲏ"]="ني",e["ﲐ"]="ىٰ",e["ﲑ"]="ير",e["ﲒ"]="يز",e["ﲓ"]="يم",e["ﲔ"]="ين",e["ﲕ"]="يى",e["ﲖ"]="يي",e["ﲗ"]="ئج",e["ﲘ"]="ئح",e["ﲙ"]="ئخ",e["ﲚ"]="ئم",e["ﲛ"]="ئه",e["ﲜ"]="بج",e["ﲝ"]="بح",e["ﲞ"]="بخ",e["ﲟ"]="بم",e["ﲠ"]="به",e["ﲡ"]="تج",e["ﲢ"]="تح",e["ﲣ"]="تخ",e["ﲤ"]="تم",e["ﲥ"]="ته",e["ﲦ"]="ثم",e["ﲧ"]="جح",e["ﲨ"]="جم",e["ﲩ"]="حج",e["ﲪ"]="حم",e["ﲫ"]="خج",e["ﲬ"]="خم",e["ﲭ"]="سج",e["ﲮ"]="سح",e["ﲯ"]="سخ",e["ﲰ"]="سم",e["ﲱ"]="صح",e["ﲲ"]="صخ",e["ﲳ"]="صم",e["ﲴ"]="ضج",e["ﲵ"]="ضح",e["ﲶ"]="ضخ",e["ﲷ"]="ضم",e["ﲸ"]="طح",e["ﲹ"]="ظم",e["ﲺ"]="عج",e["ﲻ"]="عم",e["ﲼ"]="غج",e["ﲽ"]="غم",e["ﲾ"]="فج",e["ﲿ"]="فح",e["ﳀ"]="فخ",e["ﳁ"]="فم",e["ﳂ"]="قح",e["ﳃ"]="قم",e["ﳄ"]="كج",e["ﳅ"]="كح",e["ﳆ"]="كخ",e["ﳇ"]="كل",e["ﳈ"]="كم",e["ﳉ"]="لج",e["ﳊ"]="لح",e["ﳋ"]="لخ",e["ﳌ"]="لم",e["ﳍ"]="له",e["ﳎ"]="مج",e["ﳏ"]="مح",e["ﳐ"]="مخ",e["ﳑ"]="مم",e["ﳒ"]="نج",e["ﳓ"]="نح",e["ﳔ"]="نخ",e["ﳕ"]="نم",e["ﳖ"]="نه",e["ﳗ"]="هج",e["ﳘ"]="هم",e["ﳙ"]="هٰ",e["ﳚ"]="يج",e["ﳛ"]="يح",e["ﳜ"]="يخ",e["ﳝ"]="يم",e["ﳞ"]="يه",e["ﳟ"]="ئم",e["ﳠ"]="ئه",e["ﳡ"]="بم",e["ﳢ"]="به",e["ﳣ"]="تم",e["ﳤ"]="ته",e["ﳥ"]="ثم",e["ﳦ"]="ثه",e["ﳧ"]="سم",e["ﳨ"]="سه",e["ﳩ"]="شم",e["ﳪ"]="شه",e["ﳫ"]="كل",e["ﳬ"]="كم",e["ﳭ"]="لم",e["ﳮ"]="نم",e["ﳯ"]="نه",e["ﳰ"]="يم",e["ﳱ"]="يه",e["ﳲ"]="ـَّ",e["ﳳ"]="ـُّ",e["ﳴ"]="ـِّ",e["ﳵ"]="طى",e["ﳶ"]="طي",e["ﳷ"]="عى",e["ﳸ"]="عي",e["ﳹ"]="غى",e["ﳺ"]="غي",e["ﳻ"]="سى",e["ﳼ"]="سي",e["ﳽ"]="شى",e["ﳾ"]="شي",e["ﳿ"]="حى",e["ﴀ"]="حي",e["ﴁ"]="جى",e["ﴂ"]="جي",e["ﴃ"]="خى",e["ﴄ"]="خي",e["ﴅ"]="صى",e["ﴆ"]="صي",e["ﴇ"]="ضى",e["ﴈ"]="ضي",e["ﴉ"]="شج",e["ﴊ"]="شح",e["ﴋ"]="شخ",e["ﴌ"]="شم",e["ﴍ"]="شر",e["ﴎ"]="سر",e["ﴏ"]="صر",e["ﴐ"]="ضر",e["ﴑ"]="طى",e["ﴒ"]="طي",e["ﴓ"]="عى",e["ﴔ"]="عي",e["ﴕ"]="غى",e["ﴖ"]="غي",e["ﴗ"]="سى",e["ﴘ"]="سي",e["ﴙ"]="شى",e["ﴚ"]="شي",e["ﴛ"]="حى",e["ﴜ"]="حي",e["ﴝ"]="جى",e["ﴞ"]="جي",e["ﴟ"]="خى",e["ﴠ"]="خي",e["ﴡ"]="صى",e["ﴢ"]="صي",e["ﴣ"]="ضى",e["ﴤ"]="ضي",e["ﴥ"]="شج",e["ﴦ"]="شح",e["ﴧ"]="شخ",e["ﴨ"]="شم",e["ﴩ"]="شر",e["ﴪ"]="سر",e["ﴫ"]="صر",e["ﴬ"]="ضر",e["ﴭ"]="شج",e["ﴮ"]="شح",e["ﴯ"]="شخ",e["ﴰ"]="شم",e["ﴱ"]="سه",e["ﴲ"]="شه",e["ﴳ"]="طم",e["ﴴ"]="سج",e["ﴵ"]="سح",e["ﴶ"]="سخ",e["ﴷ"]="شج",e["ﴸ"]="شح",e["ﴹ"]="شخ",e["ﴺ"]="طم",e["ﴻ"]="ظم",e["ﴼ"]="اً",e["ﴽ"]="اً",e["ﵐ"]="تجم",e["ﵑ"]="تحج",e["ﵒ"]="تحج",e["ﵓ"]="تحم",e["ﵔ"]="تخم",e["ﵕ"]="تمج",e["ﵖ"]="تمح",e["ﵗ"]="تمخ",e["ﵘ"]="جمح",e["ﵙ"]="جمح",e["ﵚ"]="حمي",e["ﵛ"]="حمى",e["ﵜ"]="سحج",e["ﵝ"]="سجح",e["ﵞ"]="سجى",e["ﵟ"]="سمح",e["ﵠ"]="سمح",e["ﵡ"]="سمج",e["ﵢ"]="سمم",e["ﵣ"]="سمم",e["ﵤ"]="صحح",e["ﵥ"]="صحح",e["ﵦ"]="صمم",e["ﵧ"]="شحم",e["ﵨ"]="شحم",e["ﵩ"]="شجي",e["ﵪ"]="شمخ",e["ﵫ"]="شمخ",e["ﵬ"]="شمم",e["ﵭ"]="شمم",e["ﵮ"]="ضحى",e["ﵯ"]="ضخم",e["ﵰ"]="ضخم",e["ﵱ"]="طمح",e["ﵲ"]="طمح",e["ﵳ"]="طمم",e["ﵴ"]="طمي",e["ﵵ"]="عجم",e["ﵶ"]="عمم",e["ﵷ"]="عمم",e["ﵸ"]="عمى",e["ﵹ"]="غمم",e["ﵺ"]="غمي",e["ﵻ"]="غمى",e["ﵼ"]="فخم",e["ﵽ"]="فخم",e["ﵾ"]="قمح",e["ﵿ"]="قمم",e["ﶀ"]="لحم",e["ﶁ"]="لحي",e["ﶂ"]="لحى",e["ﶃ"]="لجج",e["ﶄ"]="لجج",e["ﶅ"]="لخم",e["ﶆ"]="لخم",e["ﶇ"]="لمح",e["ﶈ"]="لمح",e["ﶉ"]="محج",e["ﶊ"]="محم",e["ﶋ"]="محي",e["ﶌ"]="مجح",e["ﶍ"]="مجم",e["ﶎ"]="مخج",e["ﶏ"]="مخم",e["ﶒ"]="مجخ",e["ﶓ"]="همج",e["ﶔ"]="همم",e["ﶕ"]="نحم",e["ﶖ"]="نحى",e["ﶗ"]="نجم",e["ﶘ"]="نجم",e["ﶙ"]="نجى",e["ﶚ"]="نمي",e["ﶛ"]="نمى",e["ﶜ"]="يمم",e["ﶝ"]="يمم",e["ﶞ"]="بخي",e["ﶟ"]="تجي",e["ﶠ"]="تجى",e["ﶡ"]="تخي",e["ﶢ"]="تخى",e["ﶣ"]="تمي",e["ﶤ"]="تمى",e["ﶥ"]="جمي",e["ﶦ"]="جحى",e["ﶧ"]="جمى",e["ﶨ"]="سخى",e["ﶩ"]="صحي",e["ﶪ"]="شحي",e["ﶫ"]="ضحي",e["ﶬ"]="لجي",e["ﶭ"]="لمي",e["ﶮ"]="يحي",e["ﶯ"]="يجي",e["ﶰ"]="يمي",e["ﶱ"]="ممي",e["ﶲ"]="قمي",e["ﶳ"]="نحي",e["ﶴ"]="قمح",e["ﶵ"]="لحم",e["ﶶ"]="عمي",e["ﶷ"]="كمي",e["ﶸ"]="نجح",e["ﶹ"]="مخي",e["ﶺ"]="لجم",e["ﶻ"]="كمم",e["ﶼ"]="لجم",e["ﶽ"]="نجح",e["ﶾ"]="جحي",e["ﶿ"]="حجي",e["ﷀ"]="مجي",e["ﷁ"]="فمي",e["ﷂ"]="بحي",e["ﷃ"]="كمم",e["ﷄ"]="عجم",e["ﷅ"]="صمم",e["ﷆ"]="سخي",e["ﷇ"]="نجي",e["﹉"]="‾",e["﹊"]="‾",e["﹋"]="‾",e["﹌"]="‾",e["﹍"]="_",e["﹎"]="_",e["﹏"]="_",e["ﺀ"]="ء",e["ﺁ"]="آ",e["ﺂ"]="آ",e["ﺃ"]="أ",e["ﺄ"]="أ",e["ﺅ"]="ؤ",e["ﺆ"]="ؤ",e["ﺇ"]="إ",e["ﺈ"]="إ",e["ﺉ"]="ئ",e["ﺊ"]="ئ",e["ﺋ"]="ئ",e["ﺌ"]="ئ",e["ﺍ"]="ا",e["ﺎ"]="ا",e["ﺏ"]="ب",e["ﺐ"]="ب",e["ﺑ"]="ب",e["ﺒ"]="ب",e["ﺓ"]="ة",e["ﺔ"]="ة",e["ﺕ"]="ت",e["ﺖ"]="ت",e["ﺗ"]="ت",e["ﺘ"]="ت",e["ﺙ"]="ث",e["ﺚ"]="ث",e["ﺛ"]="ث",e["ﺜ"]="ث",e["ﺝ"]="ج",e["ﺞ"]="ج",e["ﺟ"]="ج",e["ﺠ"]="ج",e["ﺡ"]="ح",e["ﺢ"]="ح",e["ﺣ"]="ح",e["ﺤ"]="ح",e["ﺥ"]="خ",e["ﺦ"]="خ",e["ﺧ"]="خ",e["ﺨ"]="خ",e["ﺩ"]="د",e["ﺪ"]="د",e["ﺫ"]="ذ",e["ﺬ"]="ذ",e["ﺭ"]="ر",e["ﺮ"]="ر",e["ﺯ"]="ز",e["ﺰ"]="ز",e["ﺱ"]="س",e["ﺲ"]="س",e["ﺳ"]="س",e["ﺴ"]="س",e["ﺵ"]="ش",e["ﺶ"]="ش",e["ﺷ"]="ش",e["ﺸ"]="ش",e["ﺹ"]="ص",e["ﺺ"]="ص",e["ﺻ"]="ص",e["ﺼ"]="ص",e["ﺽ"]="ض",e["ﺾ"]="ض",e["ﺿ"]="ض",e["ﻀ"]="ض",e["ﻁ"]="ط",e["ﻂ"]="ط",e["ﻃ"]="ط",e["ﻄ"]="ط",e["ﻅ"]="ظ",e["ﻆ"]="ظ",e["ﻇ"]="ظ",e["ﻈ"]="ظ",e["ﻉ"]="ع",e["ﻊ"]="ع",e["ﻋ"]="ع",e["ﻌ"]="ع",e["ﻍ"]="غ",e["ﻎ"]="غ",e["ﻏ"]="غ",e["ﻐ"]="غ",e["ﻑ"]="ف",e["ﻒ"]="ف",e["ﻓ"]="ف",e["ﻔ"]="ف",e["ﻕ"]="ق",e["ﻖ"]="ق",e["ﻗ"]="ق",e["ﻘ"]="ق",e["ﻙ"]="ك",e["ﻚ"]="ك",e["ﻛ"]="ك",e["ﻜ"]="ك",e["ﻝ"]="ل",e["ﻞ"]="ل",e["ﻟ"]="ل",e["ﻠ"]="ل",e["ﻡ"]="م",e["ﻢ"]="م",e["ﻣ"]="م",e["ﻤ"]="م",e["ﻥ"]="ن",e["ﻦ"]="ن",e["ﻧ"]="ن",e["ﻨ"]="ن",e["ﻩ"]="ه",e["ﻪ"]="ه",e["ﻫ"]="ه",e["ﻬ"]="ه",e["ﻭ"]="و",e["ﻮ"]="و",e["ﻯ"]="ى",e["ﻰ"]="ى",e["ﻱ"]="ي",e["ﻲ"]="ي",e["ﻳ"]="ي",e["ﻴ"]="ي",e["ﻵ"]="لآ",e["ﻶ"]="لآ",e["ﻷ"]="لأ",e["ﻸ"]="لأ",e["ﻹ"]="لإ",e["ﻺ"]="لإ",e["ﻻ"]="لا",e["ﻼ"]="لا"}));function ae(e){var t,n,i=e.length;if(i<=1||(t=e.charCodeAt(0),n=ee[13],!(t>=n.begin&&t<n.end||t>=(n=ee[11]).begin&&t<n.end)))return e;for(var a="",r=i-1;r>=0;r--)a+=e[r];return a}!function(e){e.ltr="ltr",e.rtl="rtl",e.ttb="ttb"}(te||(te={})),function(e){e[e.text=0]="text",e[e.email=1]="email",e[e.link=2]="link"}(ne||(ne={}));const re=/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,se=/[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,63}/,oe=/(\s+)/;function le(e){return"http"===e.substr(0,4)?e:"http://"+e}function ce(e){return e.split(oe).map((e=>{if(oe.test(e))return{type:ne.text,text:e.replace("\t"," ")};let t;return se.test(e)?{text:e,type:ne.email}:(t=e.match(re))&&t[2]&&t[4]?{href:le(e),text:e,type:ne.link}:{type:ne.text,text:e}})).reduce(((e,t)=>{const n=e[e.length-1];return n&&n.type===ne.text&&t.type===ne.text?n.text+=t.text:e.push(t),e}),[])}function de(e){const t=ie();let n="";for(let i=0;i<e.length;i++){let a=e.charAt(i);void 0!==t[a]&&(a=t[a]),a=ae(a),"\t"===a&&(a=" "),n+=a}const i=function(e,t,n){var i=!0,a=e.length;if(0===a||n)return J(e,i,n);Y.length=a,Z.length=a;var r,s,o=0;for(r=0;r<a;++r){Y[r]=e.charAt(r);var l=e.charCodeAt(r),c="L";l<=255?c=V[l]:1424<=l&&l<=1524?c="R":1536<=l&&l<=1791?c=z[255&l]:1792<=l&&l<=2220&&(c="AL"),"R"!==c&&"AL"!==c&&"AN"!==c||o++,Z[r]=c}if(0===o)return J(e,i=!0);-1===t&&(o/a<.3?(i=!0,t=0):(i=!1,t=1));var d=[];for(r=0;r<a;++r)d[r]=t;var g,h=W(t)?"R":"L",u=h,p=u,f=u;for(r=0;r<a;++r)"NSM"===Z[r]?Z[r]=f:f=Z[r];for(f=u,r=0;r<a;++r)"EN"===(g=Z[r])?Z[r]="AL"===f?"AN":"EN":"R"!==g&&"L"!==g&&"AL"!==g||(f=g);for(r=0;r<a;++r)"AL"===(g=Z[r])&&(Z[r]="R");for(r=1;r<a-1;++r)"ES"===Z[r]&&"EN"===Z[r-1]&&"EN"===Z[r+1]&&(Z[r]="EN"),"CS"!==Z[r]||"EN"!==Z[r-1]&&"AN"!==Z[r-1]||Z[r+1]!==Z[r-1]||(Z[r]=Z[r-1]);for(r=0;r<a;++r)if("EN"===Z[r]){var m;for(m=r-1;m>=0&&"ET"===Z[m];--m)Z[m]="EN";for(m=r+1;m<a&&"ET"===Z[m];++m)Z[m]="EN"}for(r=0;r<a;++r)"WS"!==(g=Z[r])&&"ES"!==g&&"ET"!==g&&"CS"!==g||(Z[r]="ON");for(f=u,r=0;r<a;++r)"EN"===(g=Z[r])?Z[r]="L"===f?"L":"EN":"R"!==g&&"L"!==g||(f=g);for(r=0;r<a;++r)if("ON"===Z[r]){var v=q(Z,r+1,"ON"),b=u;r>0&&(b=Z[r-1]);var L=p;v+1<a&&(L=Z[v+1]),"L"!==b&&(b="R"),"L"!==L&&(L="R"),b===L&&G(Z,r,v,b),r=v-1}for(r=0;r<a;++r)"ON"===Z[r]&&(Z[r]=h);for(r=0;r<a;++r)g=Z[r],$(d[r])?"R"===g?d[r]+=1:"AN"!==g&&"EN"!==g||(d[r]+=2):"L"!==g&&"AN"!==g&&"EN"!==g||(d[r]+=1);var N,w=-1,A=99;for(r=0,s=d.length;r<s;++r)w<(N=d[r])&&(w=N),A>N&&W(N)&&(A=N);for(N=w;N>=A;--N){var x=-1;for(r=0,s=d.length;r<s;++r)d[r]<N?x>=0&&(X(Y,x,r),x=-1):x<0&&(x=r);x>=0&&X(Y,x,d.length)}for(r=0,s=Y.length;r<s;++r){var S=Y[r];"<"!==S&&">"!==S||(Y[r]="")}return J(Y.join(""),i)}(n,-1,!1);return{dir:i.dir,str:ce(i.str)}}function ge(e){const t=[];return e.metadata&&Array.isArray(e.pages)?e.pages.map((e=>Object.assign(Object.assign({},e),{textboxes:e.textboxes.map((e=>{const t=de(e.t);return Object.assign(Object.assign({},e),{transformedText:t.str,dir:t.dir})}))}))).filter((e=>e)):t}const he="NFKC";class ue{constructor(e){this.addSyntheticSpaceBetweenTextboxes=({segments:e,segmentIndex:t,chunkIndex:n})=>{const i=e[t].chunks[n],a=e[t].chunks[n+1];return this.isNewlineTextbox(i,a)||this.isHorizontalSpaceTextbox(i,a)},this.args=e,this.kmpSearch=new r.KMPSearch((()=>this.args.retrievePages().map((e=>{var{textboxes:t}=e,n=a.__rest(e,["textboxes"]);return Object.assign(Object.assign({},n),{chunks:t})}))),{shouldAddSyntheticSpace:this.addSyntheticSpaceBetweenTextboxes,parseText:this.parseText})}setRetrieveCurrentPageIndex(e){this.retrieveCurrentPageIndex=e}fetchTextForAllPages(){var e;(null===(e=this.args.rivieraData)||void 0===e?void 0:e.metadata)&&this.args.fetchNextPageChunk({pageParam:{continueArg:{apiArg:{batchFirstPage:0,batchLastPage:this.args.rivieraData.metadata.page_count},pkgArg:this.args.rivieraData}}})}onNext(e){this.searchResult&&(this.args.dispatch(n.logUserActionEvent({userAction:n.UserAction.FindInDocNext,fileViewerId:this.args.fileViewerId,actionContext:"keyboard"===e?n.UserActionContext.Keyboard:n.UserActionContext.FindInDocSearchbar,extra:{find_method:e}})),this.searchResult.currentHit++,this.searchResult.currentHit>=this.searchResult.hits.length&&(this.searchResult.currentHit=0),this.jumpTo(this.searchResult.hits[this.searchResult.currentHit]))}onPrevious(e){this.searchResult&&(this.args.dispatch(n.logUserActionEvent({userAction:n.UserAction.FindInDocPrev,fileViewerId:this.args.fileViewerId,actionContext:"keyboard"===e?n.UserActionContext.Keyboard:n.UserActionContext.FindInDocSearchbar,extra:{find_method:e}})),this.searchResult.currentHit--,this.searchResult.currentHit<0&&(this.searchResult.currentHit=this.searchResult.hits.length-1),this.jumpTo(this.searchResult.hits[this.searchResult.currentHit]))}jumpTo(e){this.args.dispatch(n.updateDocCurrentPageIndex({fileViewerId:this.args.fileViewerId,previewKey:this.args.previewKey,pageIndex:e.pageIndex,sourceContext:n.UserActionContext.Keyboard})),this.args.dispatch(n.pageNavigation({fileViewerId:this.args.fileViewerId,previewKey:this.args.previewKey,pageIndex:e.pageIndex,centerOnYOffset:e.pageYOffset,sourceContext:n.UserActionContext.Keyboard}))}onReset(){this.searchResult=void 0,this.currentSearchTerm=void 0,this.args.onSearchResult(void 0)}search(e){if(!e)return void this.onReset();if(this.currentSearchTerm===e||null==this.kmpSearch)return;this.currentSearchTerm=e;const t=[];e=e.toLowerCase().normalize(he);this.kmpSearch.searchSegments(e,(({segments:e,segmentIndex:n,chunkIndex:i})=>{const a=e[n].dimension[1]-e[n].chunks[i].r[1];t.push({pageIndex:n,pageYOffset:a})}),(e=>{this.searchResult={highlights:e,hits:t,currentHit:this.findStartingHit(t)},this.args.onSearchResult(this.searchResult),t.length>0&&this.jumpTo(t[this.searchResult.currentHit])}))}parseText(e){return e.trimLeft().toLowerCase().normalize(he)}isNewlineTextbox(e,t){return Math.abs(e.r[1]-t.r[1])>.8*e.r[3]}isHorizontalSpaceTextbox(e,t){return Math.abs(e.r[0]+e.r[2]-t.r[0])>.3*e.h}findStartingHit(e){if(this.retrieveCurrentPageIndex&&e.length>0){const t=this.retrieveCurrentPageIndex(),n=e.findIndex((e=>e.pageIndex>=t));if(n>=0)return n}return 0}}n.injectInternalStyle("/static/js/file_viewer/preview_doc/renderer/find_in_doc_searchbar.module.out-vflhC6Ptc.css",(e=>"._findInDocSearchBar_1hxf6_1{align-items:center;background-color:var(--color__elevated__background);border:1px solid;border-color:var(--dig-color__border__subtle);box-shadow:var(--boxshadow__elevation1);color:var(--color__faint__text);display:flex;margin:0 var(--spacing__unit--2);max-width:100%;padding:var(--spacing__unit--1);position:absolute;right:0;top:0;width:400px}._findInDocSearchBar_1hxf6_1>button{margin-left:var(--spacing__unit--1)}"));const pe=e=>{var t;const{onClose:i,controller:a}=e,r=n.useIntl(),o=K.useRef(null);K.useEffect((()=>{var e;null===(e=o.current)||void 0===e||e.focus()}),[]);const l=K.useCallback(s.debounce((e=>a.search(e)),200),[a.search]),c=K.createElement(K.Fragment,null,a.searchResult&&K.createElement(n.TextInputAffix,null,K.createElement("span",{role:"status"},r.formatMessage({id:"hK6Sbz",defaultMessage:"{currentResult} of {totalResults}"},{currentResult:a.searchResult.hits.length>0?a.searchResult.currentHit+1:0,totalResults:a.searchResult.hits.length})))),d=K.useMemo((()=>[n.getEscapeBinding((()=>i("keyboard"))),n.getFindInDocBinding((()=>{var e;null===(e=o.current)||void 0===e||e.focus()}))]),[i]),g=!a.searchResult||a.searchResult.hits.length<=1;return K.createElement("div",{className:"_findInDocSearchBar_1hxf6_1"},K.createElement(n.TextInput,{ref:o,withLeftAccessory:K.createElement(n.UIIcon,{src:n.SearchLine,role:"presentation"}),withRightAccessory:c,placeholder:r.formatMessage({id:"uDh1dX",defaultMessage:"Search in this document"}),"aria-label":r.formatMessage({id:"gddc5d",defaultMessage:"Search in this document"}),onKeyDown:e=>{e.shiftKey&&e.key===n.Key_enum.Key.Enter?(a.onPrevious("keyboard"),e.stopPropagation()):e.key===n.Key_enum.Key.Enter?(a.onNext("keyboard"),e.stopPropagation()):e.key===n.Key_enum.Key.Escape?(i("keyboard"),e.stopPropagation()):(e.ctrlKey||e.metaKey)&&"f"===e.key&&e.preventDefault()},onChange:e=>l(e.currentTarget.value),isInvalid:0===(null===(t=a.searchResult)||void 0===t?void 0:t.hits.length)}),K.createElement(fe,{tooltipText:r.formatMessage({id:"zqVjrn",defaultMessage:"Find previous"}),icon:n.ChevronUpLine,onClick:()=>a.onPrevious("click"),isDisabled:g}),K.createElement(fe,{tooltipText:r.formatMessage({id:"W4xtVb",defaultMessage:"Find next"}),icon:n.ChevronDownLine,onClick:()=>a.onNext("click"),isDisabled:g}),K.createElement(fe,{tooltipText:r.formatMessage({id:"OQXRhL",defaultMessage:"Close search"}),icon:n.CloseLine,onClick:()=>i("click")}),K.createElement(n.KeyboardBindingConnector,{name:"find_in_doc",keyboardBindings:d}))};pe.displayName="FindInDocSearchbar";const fe=e=>K.createElement(n.Tooltip,{placement:"bottom",title:e.tooltipText,shouldCloseOnClick:!0},K.createElement(n.IconButton,{variant:"transparent",size:"small","aria-label":e.tooltipText,onClick:e.onClick,disabled:e.isDisabled},K.createElement(n.UIIcon,{src:e.icon})));fe.displayName="FindInDocSearchbarButton";n.injectInternalStyle("/static/js/file_viewer/preview_doc/renderer/highlights.module.out-vflWRerI8.css",(e=>"._highlight-layer_1cfda_1{height:100%;left:0;position:absolute;top:0;width:100%}._highlight-action-bar_1cfda_9{box-sizing:border-box;display:flex;flex-direction:row;opacity:0;padding:4px;position:absolute;transition:opacity .1s ease-in-out;z-index:1000}._highlight-action-bar__visible_1cfda_20{background-clip:content-box;background-color:var(--dig-color__background__base);opacity:1;transition:opacity .15s ease-in-out}"));const me="_highlight-layer_1cfda_1";function ve({x:e,y:t}){return{left:`${e}px`,top:`${t}px`}}const be=({children:e,position:t})=>K.createElement(n.ThemeProvider,{mode:"dark"},K.createElement("div",{className:n.cx("_highlight-action-bar_1cfda_9","_highlight-action-bar__visible_1cfda_20"),style:ve(t),tabIndex:-1},e));be.displayName="HighlightActionBar";const Le=new DOMRect(0,0,0,0),Ne={x:-100,y:-100},we=(e,t,i)=>{const{getPageForSelection:a}=n.usePreviewControls(),[r,s]=K.default.useState(null);return K.default.useEffect((()=>{requestAnimationFrame((()=>{var t;const n=window.getSelection(),r=n&&0!==n.rangeCount?n.getRangeAt(0).getBoundingClientRect():void 0,o=(e=>{if(!e||e.isCollapsed||0===e.rangeCount)return null;const t=e.toString().trim(),n=e.getRangeAt(0).getBoundingClientRect();return t.length>0&&n.width>0&&n.height>0?t:null})(n),l=(null!==(t=null==a?void 0:a(n))&&void 0!==t?t:-1)===e||function(e,t){if(null==e)return!1;const{focusNode:n,anchorNode:i}=e;return Boolean(t&&n&&t.contains(n)&&i&&t.contains(i))}(n,i.current);if(r&&null!==o&&l&&function(e,t){var n;const i=null===(n=document.querySelector(`#pageContainer${t+1}`))||void 0===n?void 0:n.querySelector('[class*="textLayer"]');return!!(i&&(null==e?void 0:e.anchorNode)&&(null==i?void 0:i.contains(null==e?void 0:e.anchorNode)))}(n,e)){const t=(null==n?void 0:n.getRangeAt(0))?Array.from(n.getRangeAt(0).getClientRects()):[],a=document.querySelector("[data-preview-viewport]"),l=null==a?void 0:a.getBoundingClientRect();s({text:o,page:{bounds:i.current.getBoundingClientRect(),pageNumber:e},selectionAreas:t,selectionBounds:r,viewport:l?{width:l.width,height:l.height}:{width:0,height:0}})}else s(null)}))}),[e,t,i,a]),r},Ae=e=>{var t,i,a;const[r,s]=K.default.useState(!1),[o,l]=K.default.useState(!1),[c,d]=K.default.useState(null),[g,h]=K.default.useState(0),u=K.default.useRef(null),{pageIndex:p}=e.data;var f;f=p,K.default.useEffect((()=>{var e,t,n,i;if(0!==f)return;const a=Array.from(null!==(t=null===(e=document.querySelector("#pageContainer1"))||void 0===e?void 0:e.querySelectorAll("text"))&&void 0!==t?t:[]);for(const e of a)if((null!==(i=null===(n=e.textContent)||void 0===n?void 0:n.length)&&void 0!==i?i:0)>50){e.id="highlight-tooltip-target";break}}),[f]);const m=we(p,g,u),v=K.default.useCallback((()=>{h(g+1)}),[g]),b=K.default.useCallback((()=>{r?o||l(!0):v()}),[r,o,v]),L=K.default.useCallback((()=>{s(!0),l(!1)}),[]),N=K.default.useCallback((()=>{r&&o&&v(),s(!1)}),[r,o,v]);K.default.useEffect((()=>(document.addEventListener("selectionchange",b),document.addEventListener("mousedown",L),document.addEventListener("mouseup",N),()=>{document.removeEventListener("selectionchange",b),document.removeEventListener("mousedown",L),document.removeEventListener("mouseup",N)})),[b,L,N]);const w=K.default.useMemo((()=>{var t;return m?(null!==(t=e.highlightAwarePlugins)&&void 0!==t?t:[]).map(((e,t)=>{const n=e.highlightMenuOption;return K.default.createElement(n,{key:t,selectedText:m})})):[]}),[e.highlightAwarePlugins,m]),A=null!==(i=null===(t=e.highlightAwarePlugins)||void 0===t?void 0:t.length)&&void 0!==i?i:0;return K.default.useEffect((()=>{requestAnimationFrame((()=>{var e,t;let i=null;if(null!==m){const a=null!==(t=null===(e=u.current)||void 0===e?void 0:e.getBoundingClientRect())&&void 0!==t?t:Le;i=function(e,t,i,a,r,s){const o=n.createNormalizedRegion(e,i);let l,c;if(o.y*i.height>=a+s)l=(o.x+o.width/2)*i.width-a/2,c=o.y*i.height-a-s;else if((1-o.x-o.width)*i.width>=r)l=(o.x+o.width)*i.width+s,c=(o.y+o.height/2)*i.height-r/2;else if(o.x*i.width>=r)l=o.x*i.width-r-s,c=(o.y+o.height/2)*i.height-r/2;else if((1-o.y-o.height)*i.height>=a)l=(o.x+o.width/2)*i.width-a/2,c=(o.y+o.height)*i.height+s;else{const e=n.createNormalizedRegion(t,i);l=(e.x+e.width/2)*i.width-a/2,c=(e.y+e.height)*i.height+s}return{x:l,y:c}}(m.selectionBounds,m.selectionAreas[0],a,42,42*A,8)}d(i)}))}),[w,m,A]),K.default.createElement("div",{className:n.cx(me),ref:u},c&&m&&K.default.createElement(be,{position:null!=c?c:Ne},(null!==(a=e.highlightAwarePlugins)&&void 0!==a?a:[]).map(((e,t)=>{const n=e.highlightMenuOption;return K.default.createElement(n,{key:t,selectedText:m})}))))};Ae.displayName="HighlightLayer";const xe=[100,200,400,800,1600],Se=(e,t,n)=>{if(!n)return 2;return 16777216/(e*t)},Pe=(e,t,i)=>{if(!t)return 100;const a=Math.round(100*t),r=Math.round(100*e*(n.is_mobile_or_tablet()?4:1));if(r<=a){for(const e of xe)if(a>.8*e&&a<=e)return e;return a}const s=Math.round(100*i);for(const e of xe)if(r<=e||s<e)return Math.max(e,a);return xe[xe.length-1]},Ie=({data:e,previewKey:i,filePreviewUiData:a,fileMetadata:r,onImageLoad:s,onImageError:o})=>{const[l,c]=t.useState(0),[d,g]=t.useState(0),[h,u]=t.useState(void 0),[p,f]=K.useState(Date.now()),m=t.useRef(null),{pageIndex:v,imgUrls:{imageUrlTmpl:b}}=e,[L,N]=e.dimension,w=n.getScaleFactorFromFilePreviewUi(a),A=L*w,x=N*w,S=t.useCallback((({imageUrlTmpl:e,expectedWidth:t,page:i=0,scalePercent:a})=>{t>l&&(c(t),n.rivieraClient.fetchDocImage({page:i,imageUrlTmpl:e,scalePercent:a}).then((({data:e})=>{e&&t>d?(g(t),u(e)):o(i,"error_fetch")})).catch((()=>{o(i,"error_fetch")})))}),[l,d,g,u]),P=n.useStabilizedCallback((()=>{m.current&&m.current.complete&&(m.current.naturalHeight||m.current.naturalWidth?s(v,Date.now()-p):o(v,"error_load"))})),I=t.useCallback(((e,t,i,a,r,s)=>{if(!a)return;const o=Se(r,s,a),c=Pe(i,a,o),d=c/100*r;d>Math.ceil(Math.max(n.PDF_BASE_WIDTH,l)/.8)&&S({imageUrlTmpl:e,page:t,scalePercent:c,expectedWidth:d})}),[S,l]);t.useEffect((()=>{f(Date.now())}),[]);return t.useEffect((()=>{P(),l||(N>n.LARGE_PDF_CUTOFF_DIMENSIONS?S({imageUrlTmpl:b,expectedWidth:n.PDF_BASE_WIDTH,page:v,scalePercent:Pe(n.READABLE_DOC_ZOOM_TO_FIT_SCALE_MAX,n.READABLE_DOC_ZOOM_TO_FIT_SCALE_MAX,Se(L,N,n.READABLE_DOC_ZOOM_TO_FIT_SCALE_MAX))}):S({imageUrlTmpl:b,expectedWidth:n.PDF_BASE_WIDTH,page:v}))}),[i.serialized]),t.useEffect((()=>{const e=n.getScaleFactorFromFilePreviewUi(a),{fitScaleFactor:t}=a;e!==t&&I(b,v,e,t,L,N)}),[a,I,N,b,v,L]),K.createElement("div",{className:n.container},h&&K.createElement("img",{ref:m,alt:r?r.file_name:"",width:A,height:x,role:"tabpanel","aria-hidden":"true",draggable:!1,src:h,onLoad:({currentTarget:e})=>{const t=Date.now()-p;s(v,t);const n=e.naturalWidth,i=Math.max(n,l);c(i),g(n)},onError:()=>{o(v,"error_render")},"data-testid":`fvsdk-doc-page-${e.pageIndex}`}))};Ie.displayName="ImgLayer";const Ee=e=>{const{filePreviewUiData:t}=e,i=n.getScaleFactorFromFilePreviewUi(t),a=n.useIntl(),r=n.useDispatch();const s=e.data.links.map(((t,i)=>{const s=t.a;let[o,l,c,d]=t.r;d<0&&(l+=d,d=-d),c<0&&(o+=c,c=-c);const g={position:"absolute",bottom:l,left:o,width:c,height:d};if(s.ur){const{ur:e}=s,t=e.startsWith("mailto:")||e.startsWith("tel:");return K.createElement("a",{key:i,"aria-label":a.formatMessage({id:"+trcEI",defaultMessage:"External Link"}),href:t?e:le(e),onClick:()=>function(e){r(n.openUrl({url:e}))}(e),rel:"noreferrer noopener",style:g,target:"_blank"})}return K.createElement("div",{key:i,className:n.internalLink,"data-testid":"internal-link",style:g,"aria-label":a.formatMessage({id:"UU1q+t",defaultMessage:"Internal Link"}),onClick:t=>function(t,n){t.preventDefault(),e.onInternalLinkClicked(n)}(t,s.pn)})}));return K.createElement("div",{className:n.linksLayer,style:{transform:`scale(${i})`}},s)};Ee.displayName="LinksLayer";const _e=({text:e,x:t,y:i,width:a,height:r,dir:s,style:o,findInDocHighlights:l,findInDocCurrentHit:c,charOffset:d})=>{const g=l&&n.safari?"spacing":"spacingAndGlyphs",[h,u]=K.useState(),p=K.useCallback((t=>{const a=[];if(l&&null!=t&&t.getNumberOfChars()>0){let s=0;l.forEach((l=>{if(void 0!==d&&(l.startingCharIndex<d||l.startingCharIndex>d+e.trimStart().length))return;const g=null!=d?d:0,h=t.getStartPositionOfChar(Math.min(l.startingCharIndex-g,t.getNumberOfChars()-1)).x,u=t.getEndPositionOfChar(Math.min(l.endingCharIndex-g,t.getNumberOfChars()-1)).x;if(void 0===h||void 0===u)return;const p=l.hitNumber===c,f=r+3;a.push(K.createElement("rect",{x:h-1.5,y:i-r-1.5,width:u-h+3,height:f,opacity:1,fill:p?n.findInDocHighlightPrimary:n.findInDocHighlightSecondary,style:o,key:s})),s++}))}u(a)}),[e,i,r,o,l,c,d]);return K.createElement(K.Fragment,null,K.createElement("text",{className:n.textbox,direction:s,height:r,lengthAdjust:g,style:o,textLength:a,x:t,y:i,"data-test":"textbox",ref:l?p:void 0},e),l&&h)};_e.displayName="HighlightedTextboxFragment";const Ce=({data:{r:[e,t,i,a],d:r,dir:s,transformedText:o,font:l,h:c},onClickLink:d,findInDocHighlights:g,findInDocCurrentHit:h})=>{t=-t;const u={fontSize:c};if(r&&(u.transform=`rotate(${-r}rad)`,u.transformOrigin=`${e}px ${t}px`),l&&(u.fontFamily=l.fontFamily,l.isBold&&(u.fontWeight="bold"),l.isItalic&&(u.fontStyle="italic")),1===o.length){const n=o[0];return K.createElement(_e,{text:n.text,x:e,y:t,width:i,height:a,dir:s,style:u,findInDocCurrentHit:h,findInDocHighlights:g})}const p=o.reduce(((e,t)=>e+t.text.length),0);let f=0;const m=o.map(((n,r)=>{const s=f/p*i+e,o=n.text.length/p*i,l=K.createElement(_e,{text:n.text,x:s,y:t,width:o,height:a,findInDocCurrentHit:h,findInDocHighlights:g,charOffset:f});switch(f+=n.text.length,n.type){case ne.email:const e=`mailto:${n.text}`;return K.createElement("a",{key:r,href:e,referrerPolicy:"no-referrer",onClick:()=>d(e)},l);case ne.link:return K.createElement("a",{key:r,href:n.href,target:"_blank",rel:"noreferrer noopener",referrerPolicy:"no-referrer",onClick:()=>d(n.href)},l);default:return l}}));return K.createElement("g",{className:n.textbox,direction:s,style:u,"data-test":"textbox"},m)};Ce.displayName="TextBox";const ye=({data:e,findInDocHighlights:i,findInDocCurrentHit:a,scaleFactor:r,onTextRendered:s})=>{const{textboxes:o,dimension:[l,c]}=e,d=n.useDispatch();t.useEffect((()=>{s(e.pageIndex)}),[e,s]);const g=e=>{e&&d(n.openUrl({url:e}))},h={transform:`scale(${r})`},u=o.map(((e,t)=>K.default.createElement(Ce,{onClickLink:g,key:t,data:e,findInDocHighlights:null==i?void 0:i.get(t),findInDocCurrentHit:a})));return K.default.createElement("svg",{className:n.textLayer,viewBox:`0 -${c} ${l} ${c}`,width:l,height:c,style:h,"data-test":"text-layer"},u)};ye.displayName="TextLayer";const De=e=>t=>{const i=[K.createElement(Ie,Object.assign({key:"image"},e,t)),K.createElement(Ae,Object.assign({key:"highlights"},e,t)),K.createElement(ye,Object.assign({key:"text",onTextRendered:e.onTextRendered,scaleFactor:n.getScaleFactorFromFilePreviewUi(e.filePreviewUiData)},t)),K.createElement(Ee,Object.assign({key:"links"},e,t))];return function(e,t,i){const{pluginProps:a,activeOverlayPlugin:r,titleBarActionSetters:s}=e,l=i;if((null==a?void 0:a.previewType)===n.PreviewType.Archive)return l;if(null!=r&&null!=a){const{data:{pageIndex:e,dimension:n}}=t,i={width:n[0],height:n[1]},c=Object.assign(Object.assign({},a),{layer:{dimensions:i,pageIndex:e},titleBarActionSetters:s}),{layerUI:{Layer:d,LayerWithEventBubbling:g}}=r;if(null!=d)return[...l,K.createElement(d,Object.assign({},c))];if(null!=g)return[K.createElement(o.PortalTargetProvider,{key:"portal-target-provider"},(e=>K.createElement(g,Object.assign({},c),K.createElement(o.PortalWrapper,{element:e},l),K.createElement("div",null))))]}return i}(e,t,i)},Me=({passwordAttempt:e,onSubmit:t,onDismiss:i,fileName:a})=>{const r=n.useIntl(),[s,o]=K.useState("");K.useEffect((()=>o("")),[e]);const l=n.useStabilizedCallback((e=>{o(e.currentTarget.value)})),c=n.useStabilizedCallback((e=>{"Enter"===e.key&&t(s)})),d=n.useStabilizedCallback((()=>{t(s)})),g=e>0,h=r.formatMessage({id:"GKzMoF",defaultMessage:"Close"});return K.createElement(n.Modal$1,{open:!0,isCentered:!0,withCloseButton:h,onRequestClose:i},K.createElement(n.Modal$1.Header,{hasBottomSpacing:"title-standard"},K.createElement(n.Modal$1.Title,null,r.formatMessage({id:"jvUwnG",defaultMessage:"This file is password protected"}))),K.createElement(n.Modal$1.Body,null,!!a&&K.createElement(n.TextInput,{type:"text",value:a,style:{display:"none"},wrapperProps:{style:{display:"none"}}}),K.createElement("label",null,g?r.formatMessage({id:"qW3q74",defaultMessage:"The password you entered is incorrect, please try again."}):r.formatMessage({id:"qeA+3O",defaultMessage:"Enter password to continue."}),K.createElement(n.TextInput,{autoFocus:!0,type:"password",value:s,isInvalid:g,placeholder:r.formatMessage({id:"4RJ0I8",defaultMessage:"Password"}),onChange:l,wrapperProps:{style:{marginTop:"15px"}},onKeyDown:c}))),K.createElement(n.Modal$1.Footer,null,K.createElement(n.Button,{variant:"opacity",onClick:i},r.formatMessage({id:"xuJw2w",defaultMessage:"Cancel"})),K.createElement(n.Button,{variant:"primary",onClick:d},r.formatMessage({id:"RS9CyP",defaultMessage:"Submit"}))))};Me.displayName="PasswordModal";const Fe=({data:e={pageIndex:0,dimension:[0,0],thumbnailUrl:"",imgUrls:{"1x":"","4x":"",imageUrlTmpl:""},textboxes:[],links:[]},scaleFactor:t=0,children:i=(()=>null),onRef:a=(()=>{}),onMouseMove:r,onMouseUp:s,onMouseEnter:o,onMouseDown:l,isFocused:c,findInDocHighlights:d,findInDocCurrentHit:g})=>{const{pageIndex:h,dimension:[u,p]}=e,f=K.useRef(null);return K.useEffect((()=>(null!=a&&a(h,f.current),()=>{a(h,null)})),[a,h]),K.createElement("div",{id:`pageContainer${h+1}`,"data-testid":`pageContainer${h+1}`,className:n.page,"data-index":h,style:{width:u*t,height:p*t},onMouseDown:l,onMouseMove:r,onMouseUp:s,onMouseEnter:o,ref:f,role:"presentation"},i({isFocused:c,data:e,findInDocHighlights:d,findInDocCurrentHit:g}))};Fe.displayName="Page";const ke=K.memo((e=>{const{index:t,pageData:n,isFocused:i,onMouseDown:a,onMouseEnter:r,onMouseMove:s,onMouseUp:o,onRef:l,scaleFactor:c,children:d,top:g,findInDocHighlights:h,findInDocCurrentHit:u}=e,{dimension:[p,f]}=n,m=K.useMemo((()=>({width:p*c,height:f*c,transform:`translateY(${g}px)`})),[p,f,c,g]);return K.createElement("li",{"data-index":t,key:t,style:m},K.createElement(Fe,{data:n,onMouseDown:a,onMouseEnter:r,onMouseMove:s,onMouseUp:o,scaleFactor:c,isFocused:i,onRef:l,findInDocHighlights:h,findInDocCurrentHit:u},d))}));ke.displayName="PdfPage",ke.displayName="PdfPage";class Oe extends K.PureComponent{constructor(e){super(e),this.state={currentPageIndex:0,startPage:0,endPage:0,pagesScrollTop:[]},this.__viewportEl=null,this.viewportElRef=e=>this.__viewportEl=e,this.totalPagesHeight=0,this.maxWidth=0,this.ol=null,this.handleScrollTopChange=()=>{this.__viewportEl&&(this.props.pageNavigation&&this.props.dispatchResolvePageNavigation(),this.setStateForStartAndEndPage(this.state.pagesScrollTop))},this.throttledHandleScrollTopChange=s.throttle((()=>this.handleScrollTopChange()),50,{leading:!0}),this.scrollDown=()=>{this.__viewportEl&&this.__viewportEl.scrollTo(0,this.__viewportEl.scrollTop+60)},this.scrollUp=()=>{this.__viewportEl&&this.__viewportEl.scrollTo(0,this.__viewportEl.scrollTop-60)},this.pageUp=()=>{this.scrollToPage(Math.max(0,this.state.currentPageIndex-1))},this.pageDown=()=>{this.props.count&&this.scrollToPage(Math.min(this.props.count-1,this.state.currentPageIndex+1))},e.findInDocController&&e.findInDocController.setRetrieveCurrentPageIndex((()=>this.state.currentPageIndex))}getMargin(){return n.DOC_LI_MARGIN}computeScrollTops(){const{pages:e,scaleFactor:t}=this.props,i=n.DOC_LI_MARGIN,a=[i];let r=i;for(let n=1;n<e.length;++n){const s=e[n-1].dimension[1]*t+i;a.push(r+s),r+=s}if(e.length>0){const n=e[e.length-1].dimension[1]*t;this.totalPagesHeight=r+n+2*i}return this.setState({pagesScrollTop:a}),a}updateMaxWidth(){const{pages:e,scaleFactor:t}=this.props;let n=0;for(let t=0;t<e.length;++t){const i=e[t].dimension[0];i>n&&(n=i)}this.maxWidth=n*t}setStateForStartAndEndPage(e){if(!this.__viewportEl)return;const t=s.sortedIndex(e,this.__viewportEl.scrollTop),n=(t>0?(e[t-1]+e[t])/2:-1)>this.__viewportEl.scrollTop||e[t]>this.__viewportEl.scrollTop+this.__viewportEl.offsetHeight/2?t-1:Math.min(t,e.length-1),[i,a]=[n-1,n+1],r=Math.max(0,i-10),o=Math.min(this.props.pages.length-1,a+10);this.setState({startPage:r,endPage:o,currentPageIndex:n})}scrollToPage(e,t=null,i){const{count:a,scaleFactor:r}=this.props;if(e<0||e>=a||!this.ol||!this.__viewportEl)return;const s=t?t[e]:this.state.pagesScrollTop[e],o=i?i*r-this.__viewportEl.clientHeight/2:0;this.__viewportEl.scrollTop=Math.max(s+n.DOC_LI_MARGIN+o,n.DOC_LI_MARGIN)}componentDidMount(){const e=this.computeScrollTops();this.updateMaxWidth(),this.__viewportEl&&this.setStateForStartAndEndPage(e)}componentDidUpdate(e,t){let n;t.currentPageIndex!==this.state.currentPageIndex&&this.props.onPageChange&&this.props.onPageChange(this.state.currentPageIndex,e.currentPageIndex),e.pages===this.props.pages&&e.scaleFactor===this.props.scaleFactor||(n=this.computeScrollTops(),this.setStateForStartAndEndPage(n),this.updateMaxWidth(),e.scaleFactor!==this.props.scaleFactor&&this.scrollToPage(this.state.currentPageIndex,n)),this.props.pageNavigation&&e.pageNavigation&&this.props.previewKey.serialized!==e.previewKey.serialized?this.props.dispatchResolvePageNavigation():this.props.pageNavigation&&this.scrollToPage(this.props.pageNavigation.pageIndex,n,this.props.pageNavigation.centerOnYOffset)}makePdfPage(e){const{children:t,pages:n,onMouseDown:i,onMouseEnter:a,onMouseMove:r,onMouseUp:s,scaleFactor:o,findInDocData:l}=this.props,c=n[e],d=this.state.pagesScrollTop[e];return K.createElement(ke,{key:c.pageIndex,index:e,pageData:c,isFocused:this.state.currentPageIndex===e,onMouseDown:i,onMouseEnter:a,onMouseMove:r,onMouseUp:s,onRef:this.props.onPageRef,scaleFactor:o,top:d,children:t,findInDocHighlights:null==l?void 0:l.highlights.get(e),findInDocCurrentHit:null==l?void 0:l.currentHit})}render(){const{className:e,pages:t,brandingInfo:n,sharedLinkInfo:i,isEditing:a}=this.props,{startPage:r,endPage:s}=this.state,l={height:this.totalPagesHeight,minWidth:`${this.maxWidth+50}px`};return K.createElement("div",{className:e,onScroll:this.throttledHandleScrollTopChange,ref:this.viewportElRef,"data-preview-viewport":!0},K.createElement("ol",{ref:e=>this.ol=e,style:l},K.createElement(o.FilePreviewBrandingLogoAndSocials,{teamBranding:i,userBranding:n,isEditing:a}),t.slice(r,s+1).map(((e,t)=>this.makePdfPage(r+t)))))}}Oe.displayName="PdfPages";const Te=parseInt(n.thumbnailWidth,10),Be=parseInt(n.border,10),Re=Te-2*Be,Ue=parseInt(n.sidebarWidth,10);const He=({isSelected:e,onClick:t,index:i,intl:a,thumbnailUrl:r,aspectRatio:s,isVisible:o,isEditMode:l,isSidebarFocused:c,top:d})=>{const g=K.useRef(null),[h,u]=K.useState(!1),[p,f]=K.useState(!1),m=K.useCallback((()=>{f(!0)}),[]),v=K.useCallback((()=>{u(!0)}),[]),b=K.useRef(e);K.useEffect((()=>{var t;c&&e&&!b.current&&(null===(t=g.current)||void 0===t||t.focus())}),[c,e]),K.useEffect((()=>{b.current=e}),[e]);const L=i+1,N=a.formatMessage({id:"HL27OJ",defaultMessage:"Page {index}"},{index:L});return K.createElement("li",{"data-index":i,style:{transform:`translateY(${d}px`}},K.createElement("a",{href:"#",onClick:e=>{e.preventDefault(),t(i)},tabIndex:-1,"aria-current":e?"page":void 0,"aria-label":N,ref:g},K.createElement("div",{className:n.thumbnailContainer},K.createElement("div",{className:n.cx(n.thumbnail,{[n.selected]:e,[n.isUnfocusedInEditMode]:l&&!c}),style:{height:Re*s+2*Be}},!o||(h||p)&&r?void 0:K.createElement(n.Spinner,{className:n.loader,size:"xsmall"}),o&&r&&!h?K.createElement("img",{src:r,onLoad:m,onError:v,alt:""}):void 0),K.createElement("span",{"aria-hidden":!0},L))))};He.displayName="InternalSidebarItem";class je extends K.Component{constructor(){super(...arguments),this.containerHeight=0,this.state={startPage:0,endPage:0,startPageNoBuffer:0,endPageNoBuffer:0,pagesScrollTop:[],totalPagesHeight:0},this.handleScrollTo=s.throttle((e=>{this.nav&&(this.nav.scrollTop=this.state.pagesScrollTop[e])}),50,{leading:!1,trailing:!0}),this.handleScrollTopChange=()=>{this.ol&&this.setStateForStartAndEndPage(this.state.pagesScrollTop)},this.throttledHandleScrollTopChange=s.throttle((()=>this.handleScrollTopChange()),50,{leading:!0})}computeScrollTops(){const{pages:e}=this.props;if(0==e.length)return[];const t=[32];let n=32;for(let i=0;i<e.length-1;++i){const a=e[i].dimension,r=Re*a[1]/a[0]+2*Be+24+20+24;t.push(n+r),n+=r}const i=e[e.length-1].dimension,a=n+(Re*i[1]/i[0]+2*Be)+48;return this.state.totalPagesHeight=a,this.setState({pagesScrollTop:t,totalPagesHeight:a}),t}scrollToItemIfNeeded(e){const{startPageNoBuffer:t,endPageNoBuffer:n}=this.state,{pages:i}=this.props;e<0||e>=i.length||!this.nav||(e<t||e>=n)&&this.handleScrollTo(e)}setStateForStartAndEndPage(e){const[t,n]=[s.sortedIndex(e,this.nav.scrollTop),s.sortedIndex(e,this.nav.scrollTop+this.nav.offsetHeight)];this.setState({startPageNoBuffer:t,endPageNoBuffer:n,startPage:Math.max(0,t-10),endPage:Math.min(this.props.pages.length-1,n+10)})}shouldComponentUpdate(e,t){const i=this.props,{pages:r}=i,s=a.__rest(i,["pages"]),{pages:o}=e,l=a.__rest(e,["pages"]);return!n.shallowEqual(s,l)||!n.shallowEqual(this.state,t)||!function(e,t){return e.length===t.length&&!e.find(((e,n)=>e.thumbnailUrl!==t[n].thumbnailUrl))}(r,o)}componentDidMount(){const e=this.computeScrollTops();this.setStateForStartAndEndPage(e),this.containerHeight=this.nav.offsetHeight}componentDidUpdate(e){this.nav&&this.nav.offsetHeight!==this.containerHeight&&(this.setStateForStartAndEndPage(this.state.pagesScrollTop),this.containerHeight=this.nav.offsetHeight),(this.props.currentPageIndex!==e.currentPageIndex||this.props.isOpened&&!e.isOpened)&&this.scrollToItemIfNeeded(this.props.currentPageIndex)}render(){const{currentPageIndex:e,isFocused:t,onBlur:i,onFocus:a,pages:r,intl:s,style:o,isOpened:l,isEditMode:c}=this.props,{startPage:d,endPage:g,totalPagesHeight:h}=this.state,u=r.slice(d,g+1).map(((n,i)=>{const a=i+d;return K.createElement(He,{key:a,isSelected:e===a,onClick:this.props.onPageChange,index:a,intl:s,thumbnailUrl:n.thumbnailUrl,isVisible:!0,aspectRatio:n.dimension[1]/n.dimension[0],isSidebarFocused:!0===t,isEditMode:c,top:this.state.pagesScrollTop[a]})})),p={height:h,display:l?void 0:"none"};return K.createElement("div",{className:n.cx(n.container$1,{[n.focused]:t,[n.open]:l,[n.isEditMode]:c}),"aria-label":s.formatMessage({id:"HzLiwF",defaultMessage:"Document Sidebar"}),style:o,ref:e=>{this.nav=e},onScroll:this.throttledHandleScrollTopChange,"aria-hidden":!l},K.createElement("ol",{"aria-label":s.formatMessage({id:"J/2gSB",defaultMessage:"Page list"}),ref:e=>this.ol=e,tabIndex:l?0:-1,onFocus:a,onBlur:i,style:p},u))}}je.defaultProps={currentPageIndex:0,pages:[],onPageChange:function(){}},je.displayName="Sidebar";const Ke=({activeCommentPlugin:e,activeOverlayEditor:i,activeHighlightOverlayPlugin:a,highlightAwarePlugins:r,brandingInfo:s,featureConfig:d,data:g,fileInfo:h,fileMetadata:u,filePreviewUiData:p,fileViewerId:f,fileViewerUiData:m,findInDocController:v,findInDocData:b,header:L,height:N,layerRenderFn:w,logSidebarPageClick:A,onInteractive:x,onMouseDown:S,onMouseEnter:P,onMouseMove:I,onMouseUp:E,onPageChange:_,onPageImageError:C,onPageRef:y,onRenderSucceeded:D,previewKey:M,previewMetadata:F,rivieraData:k,sharedLinkInfo:O,titleBarActionSetters:T,width:B,logDocPageload:R,isEditing:U})=>{const[H,j]=t.useState(!1),[V,z]=t.useState(!1),W=t.useRef(null),$=t.useRef({}),q=n.useDispatch(),G=n.useIntl(),{currentPageIndex:X}=p,J=n.getScaleFactorFromFilePreviewUi(p),{isDocSidebarOpen:Y,isFullScreen:Z}=m,Q=n.shouldShowDocSidebar(B,n.PreviewType.SsrDoc),ee=Q&&Y,te=null!=(ne=null==i?void 0:i.mode)&&"edit"===ne.type;var ne;const ie=n.useFileViewerSelector(n.getPluginProps,f),ae=t.useCallback((()=>{j(!0)}),[]),re=t.useCallback((()=>{j(!1)}),[]),se=n.useStabilizedCallback(((e,t)=>{q(n.pageNavigation({fileViewerId:f,previewKey:M,sourceContext:t,pageIndex:e}))})),oe=n.useStabilizedCallback((e=>{ae(),se(e,n.UserActionContext.DocSidebar),null==A||A()})),le=n.useStabilizedCallback((()=>{q(n.resolvePageNavigation({fileViewerId:f,previewKey:M,sourceContext:n.UserActionContext.Default}))})),ce=n.useStabilizedCallback((()=>{!V&&Object.keys($.current).find((e=>3===$.current[+e]))&&(z(!0),null==D||D())})),de=t.useCallback((e=>{se(e,n.UserActionContext.DocLink)}),[se]),ge=t.useCallback(((e,t)=>{$.current[e]|=2,x(),ce(),n.PreviewsEventLogger.mark(n.PreviewsTimingEvents.FVSDK_FIRST_DOC_PAGE_ON_LOAD),null==R||R(n.DocPageLoadState.Loaded,{durationMs:t})}),[ce,x,R]),he=t.useCallback(((e,t)=>{null==C||C(),null==R||R(n.DocPageLoadState.Error,{error:t})}),[C,R]),ue=t.useCallback((e=>{$.current[e]|=1,ce()}),[ce]),pe=t.useCallback((()=>{var e;null===(e=W.current)||void 0===e||e.pageDown()}),[]),fe=t.useCallback((()=>{var e;null===(e=W.current)||void 0===e||e.pageUp()}),[]),me=t.useCallback((()=>{var e;null===(e=W.current)||void 0===e||e.scrollDown()}),[]),ve=t.useCallback((()=>{var e;null===(e=W.current)||void 0===e||e.scrollUp()}),[]),be=n.useStabilizedCallback((()=>H?fe():ve())),Le=n.useStabilizedCallback((()=>H?pe():me())),Ne=t.useCallback((()=>{se(0,n.UserActionContext.Keyboard)}),[se]),we=t.useCallback((()=>{se(k.pages.length-1,n.UserActionContext.Keyboard)}),[se,k.pages.length]),Ae=t.useMemo((()=>[...n.getPageUpDownBindings({pageUp:fe,pageDown:pe}),...n.getUpDownBindings({up:be,down:Le}),...n.getHomeEndBindings({home:Ne,end:we})]),[fe,pe,be,Le,Ne,we]),xe=t.useMemo((()=>(g||[]).slice(0,V?void 0:1)),[g,V]);return K.createElement(K.Fragment,null,K.createElement("article",{className:n.cx(n.container),style:{visibility:V?"visible":"hidden"},"data-testid":"document-container"},(V||Y)&&Q&&!Z?K.createElement(je,{isOpened:Y,isEditMode:te,currentPageIndex:X,pages:g,intl:G,isFocused:H,onPageChange:oe,onFocus:ae,onBlur:re,featureConfig:d}):null,K.createElement("div",{className:c.headerContainer},K.createElement(l.PluginHeader,{activeCommentPlugin:e,header:L}),K.createElement(o.FilePreviewBrandingBackground,{teamBranding:O,userBranding:s,isEditing:U},K.createElement(Oe,{className:n.cx(n.pdfViewport),count:g?g.length:1,height:N,onMouseDown:S,onMouseEnter:P,onMouseMove:I,onMouseUp:E,onPageChange:_,currentPageIndex:X,pages:xe,ref:W,scaleFactor:J,width:ee?B-Ue:B,pageNavigation:p.pageNavigation,dispatchResolvePageNavigation:le,onPageRef:y,previewKey:M,findInDocData:b,findInDocController:v,brandingInfo:s,sharedLinkInfo:O,isEditing:U},w({activeOverlayPlugin:i||a||e,highlightAwarePlugins:r,featureConfig:d,fileViewerUiData:m,dispatch:q,fileInfo:h,fileMetadata:u,filePreviewUiData:p,fileViewerId:f,intl:G,pluginProps:ie,previewKey:M,previewMetadata:F,onImageError:he,onImageLoad:ge,onInternalLinkClicked:de,onTextRendered:ue,titleBarActionSetters:T}))))),K.createElement(n.KeyboardBindingConnector,{name:"preview_pdf",keyboardBindings:Ae}))};Ke.displayName="PreviewPDF";const Ve=({activeCommentPlugin:e,activeOverlayEditor:i,highlightAwarePlugins:a,activeHighlightOverlayPlugin:r,brandingInfo:d,featureConfig:g,data:h,fileInfo:u,fileMetadata:p,filePreviewUiData:f,fileViewerId:m,fileViewerUiData:v,findInDocController:b,findInDocData:L,header:N,height:w,layerRenderFn:A,logSidebarPageClick:x,onInteractive:S,onPageChange:P,onPageMouseDown:I,onPageMouseEnter:E,onPageMouseMove:_,onPageMouseUp:C,onPageRef:y,onRenderSucceeded:D,previewKey:M,previewMetadata:F,refCallback:k,rivieraData:O,sharedLinkInfo:T,width:B,logDocPageload:R,isEditing:U})=>{var H,j;const[V,z]=t.useState(!0),[W,$]=t.useState(!1),q=t.useRef(new Set),G=t.useRef({}),X=n.useDispatch(),J=n.useIntl(),Y=null!==(j=null===(H=f.pageNavigation)||void 0===H?void 0:H.pageIndex)&&void 0!==j?j:f.currentPageIndex,Z=n.getScaleFactorFromFilePreviewUi(f),{isDocSidebarOpen:Q,isFullScreen:ee}=v,te=W&&n.shouldShowDocSidebar(B,n.PreviewType.SsrDoc)&&!ee,ne=n.useFileViewerSelector(n.getPluginProps,m);t.useEffect((()=>{const e=Math.max(0,Y-10),t=Math.min(h.length-1,Y+10);h.slice(e,t+1).map((e=>{const{pageIndex:t,imgUrls:i}=e;q.current.has(t)||(n.rivieraClient.fetchDocImage({page:t,imageUrlTmpl:i.imageUrlTmpl}).catch(),q.current.add(t))}))}),[Y,h]),t.useEffect((()=>{b&&b.setRetrieveCurrentPageIndex((()=>f.currentPageIndex))}),[]),t.useEffect((()=>{var e,t;(null===(e=f.pageNavigation)||void 0===e?void 0:e.pageIndex)&&(P(null===(t=f.pageNavigation)||void 0===t?void 0:t.pageIndex,n.UserActionContext.Default),X(n.resolvePageNavigation({fileViewerId:m,previewKey:M,sourceContext:n.UserActionContext.Default})))}),[f.pageNavigation,P,X,m,M]);const ie=n.useStabilizedCallback((e=>{re(),null==x||x(),P&&P(e,n.UserActionContext.DocSidebar)})),ae=n.useStabilizedCallback(s.debounce((e=>{if(!h.length)return;const t=n.getScaleFactorFromFilePreviewUi(f),{currentPageIndex:i}=f,a=(r=h[i].dimension,s=[B,w],o.calculateFitBox(s[0],s[1],r[0]/r[1])[0]/r[0]);var r,s;t.toFixed(2)<=a.toFixed(2)&&P&&P(i+(e.deltaY>0?1:-1),n.UserActionContext.MouseWheel)}),40,{leading:!0,trailing:!1})),re=t.useCallback((()=>{z(!0)}),[]),se=t.useCallback((()=>{z(!1)}),[]),oe=n.useStabilizedCallback((()=>{!W&&Object.keys(G.current).find((e=>3===G.current[+e]))&&($(!0),null==D||D())})),le=t.useCallback((()=>{}),[]),ce=t.useCallback(((e,t)=>(G.current[e]|=2,S(),n.PreviewsEventLogger.mark(n.PreviewsTimingEvents.FVSDK_FIRST_DOC_PAGE_ON_LOAD),t&&(null==R||R(n.DocPageLoadState.Loaded,{durationMs:t})),oe())),[oe,S,R]),de=t.useCallback(((e,t)=>{null==R||R(n.DocPageLoadState.Error,{error:t})}),[R]),ge=t.useCallback((e=>{G.current[e]|=1,oe()}),[oe]),he=n.useStabilizedCallback((()=>P(f.currentPageIndex-1,n.UserActionContext.Keyboard))),ue=n.useStabilizedCallback((()=>P(f.currentPageIndex+1,n.UserActionContext.Keyboard))),pe=n.useStabilizedCallback((()=>P(0,n.UserActionContext.Keyboard))),fe=n.useStabilizedCallback((()=>P(O.pages.length-1,n.UserActionContext.Keyboard))),me=t.useMemo((()=>[...n.getPageUpDownBindings({pageUp:he,pageDown:ue}),...n.getUpDownBindings({up:he,down:ue}),...n.getHomeEndBindings({home:pe,end:fe})]),[ue,pe,fe,he]);return K.createElement(K.Fragment,null,K.createElement("article",{ref:k,className:n.container,style:{visibility:W?"visible":"hidden",height:w,width:B},"data-testid":"presentation-container"},te?K.createElement(je,{currentPageIndex:Y,pages:h,intl:J,isFocused:V,onPageChange:ie,onFocus:re,onBlur:se,isOpened:Q,featureConfig:g}):null,K.createElement("div",{className:c.headerContainer,"data-preview-viewport":!0},ne&&K.createElement(l.PluginHeader,{activeCommentPlugin:e,header:N}),K.createElement(o.FilePreviewBrandingBackground,{teamBranding:T,userBranding:d,isEditing:U},K.createElement("section",{className:n.pptViewport,onWheel:ae,"data-testid":"ppt-page"},K.createElement("div",{className:n.pptSizer},K.createElement(o.FilePreviewBrandingLogoAndSocials,{teamBranding:T,userBranding:d,isEditing:U}),K.createElement(Fe,{key:Y,onMouseDown:I,onMouseEnter:E,onMouseMove:_,onMouseUp:C,onRef:y,data:h?h[Y]:void 0,scaleFactor:Z,findInDocHighlights:null==L?void 0:L.highlights.get(Y),findInDocCurrentHit:null==L?void 0:L.currentHit},A({activeOverlayPlugin:i||r||e,highlightAwarePlugins:a,featureConfig:g,fileViewerUiData:v,dispatch:X,fileInfo:u,fileMetadata:p,filePreviewUiData:f,fileViewerId:m,intl:J,pluginProps:ne,previewKey:M,previewMetadata:F,onImageError:de,onImageLoad:ce,onInternalLinkClicked:le,onTextRendered:ge}))))))),K.createElement(n.KeyboardBindingConnector,{name:"preview_ppt",keyboardBindings:me}))};Ve.displayName="PreviewPPT";const ze=[".docx",".pptx"];class We extends K.PureComponent{constructor(e){super(e),this.state={transformedData:this.props.rivieraData&&ge(this.props.rivieraData)},this.pageRefs={},this.capturePageRef=(e,t)=>{null==t?delete this.pageRefs[e]:this.pageRefs[e]={el:t,pageIndex:e}},this.handlePageChange=(e,t)=>{var i,a,r;this.props.dispatch(n.updateDocCurrentPageIndex({fileViewerId:this.props.fileViewerId,previewKey:this.props.previewKey,pageIndex:e,pageCount:null!==(r=null===(a=null===(i=this.props.rivieraData)||void 0===i?void 0:i.metadata)||void 0===a?void 0:a.page_count)&&void 0!==r?r:0,sourceContext:t}))},this.handlePdfPageChange=e=>{this.handlePageChange(e,n.UserActionContext.MouseWheel)},this.getPageForSelection=e=>{if(null!=e)for(const{pageIndex:t,el:n}of Object.values(this.pageRefs))if(null!=n&&null!=e.anchorNode&&e.anchorNode.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_CONTAINS&&null!=e.focusNode&&e.focusNode.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_CONTAINS)return t},this.handlePasswordSubmit=e=>{const{fileViewerId:t,fileInfo:i,sharedLinkInfo:r,previewKey:s,previewMetadata:o,dispatch:l,subpaths:c}=this.props;if(!o||!o.content)return;l(n.incrementDocPasswordAttempts({fileViewerId:t,previewKey:s}));const{refresh_url:d}=o.content;n.invariant(!!d,n.FVErrorCode.MalformedRivieraData,n.ErrorLifecycle.Render,"Cannot send password! Missing refresh_url from preview metadata"),((e,t,i,r,s,o,l,c)=>{a.__awaiter(void 0,void 0,void 0,(function*(){var a;const d=n.prepareArchiveQueryFileInfo(i,r),g=yield n.rivieraClient.refreshDocBlob(s,o);if((null===(a=g.error)||void 0===a?void 0:a.statusCode)===n.RivieraStatus.PasswordProtected)return;if(g.error)return void n.queryClient.setQueryData(n.createPreviewMetadataQueryKey(d),{apiData:{results:[{file:d,preview:{previewKey:e,previewType:n.PreviewType.Error,error:new n.FVError(n.FVErrorCode.RivieraDataFetchFailure,n.ErrorLifecycle.Download,g.error.message)}}]},pkgData:{previewKey:e,previewType:n.PreviewType.Error,error:new n.FVError(n.FVErrorCode.RivieraDataFetchFailure,n.ErrorLifecycle.Download,g.error.message)}});const h=g.data,u={content:Object.assign(Object.assign({},null==t?void 0:t.content),{text_url_tmpl:h.text,image_url_tmpl:h.image,refresh_url:h.refresh,".tag":"ssr_doc"}),preview_url:null==t?void 0:t.preview_url,previewType:n.PreviewType.SsrDoc};n.updatePreviewMetadata(d,u,e,l,c)}))})(s,o,i,r,d,e,c)},this.showPasswordProtectedError=()=>{const e=n.isNestedArchiveFilePreviewKey(this.props.previewKey)?n.prepareArchiveQueryFileInfo(this.props.fileInfo,this.props.sharedLinkInfo):n.prepareFileInfo(this.props.fileInfo,this.props.sharedLinkInfo);n.updatePreviewMetadata(e,{previewType:n.PreviewType.Error,error:new n.FVError(n.FVErrorCode.PasswordProtected,n.ErrorLifecycle.Download)},this.props.previewKey,this.props.subpaths)},this.hasFetchedPageData=e=>this.metadataBatchPageRanges.some((t=>e[0]>=t[0]&&e[1]<=t[1])),this.fetchPageRange=e=>{this.metadataBatchPageRanges.push(e),this.props.fetchNextPageBatch({pageParam:{continueArg:{apiArg:{batchFirstPage:e[0],batchLastPage:e[1]},pkgArg:this.props.rivieraData}}})},this.maybeFetchPageDataWithMetadata=e=>{const t=n.calculatePageRange(e);this.hasFetchedPageData(t)||this.fetchPageRange(t);const i=n.getNextPageRange(t);!this.hasFetchedPageData(i)&&n.shouldFetchNextBatch(e,t)&&this.props.rivieraData.metadata&&i[0]<this.props.rivieraData.metadata.page_count&&this.hasFetchedPageData(i)},this.onRenderSucceeded=()=>{this.props.onRenderSucceeded(),this.maybeFetchPageDataWithMetadata(this.props.filePreviewUiData.currentPageIndex)},this.zoomIn=()=>{const{dispatch:e,fileViewerId:t,previewKey:i}=this.props;e(n.zoomIn({fileViewerId:t,previewKey:i,sourceContext:n.UserActionContext.Keyboard}))},this.zoomOut=()=>{const{dispatch:e,fileViewerId:t,previewKey:i}=this.props;e(n.zoomOut({fileViewerId:t,previewKey:i,sourceContext:n.UserActionContext.Keyboard}))},this.logSidebarPageClick=()=>{this.props.dispatch(n.logUserActionEvent({userAction:n.UserAction.SelectSidebarPage,fileViewerId:this.props.fileViewerId,actionContext:n.UserActionContext.LeftRail}))},this.logDocPageload=(e,t)=>{const i=null==t?void 0:t.durationMs,a=null==t?void 0:t.error;this.props.dispatch(n.logBackgroundEvent({event:n.BackgroundEvent.DocPageLoad,fileViewerId:this.props.fileViewerId,extra:Object.assign(Object.assign({status:e},i?{durationMs:null==i?void 0:i.toString()}:{}),a?{error:a}:{})}))},this.logFindAction=(e,t,i)=>{this.props.dispatch(n.logUserActionEvent({userAction:e,fileViewerId:this.props.fileViewerId,actionContext:t,extra:{find_method:i}}))},this.findInDoc=e=>{if(this.state.findInDoc){if(this.logFindAction(n.UserAction.FindInDocStart,"keyboard"===e?n.UserActionContext.Keyboard:n.UserActionContext.Toolbar,e),this.props.rivieraData.metadata){const e=[0,this.props.rivieraData.metadata.page_count];this.hasFetchedPageData(e)||(this.metadataBatchPageRanges.push(e),this.state.findInDoc.controller.fetchTextForAllPages())}this.setState({findInDoc:Object.assign(Object.assign({},this.state.findInDoc),{searchbarShown:!0})})}},this.closeFindInDoc=e=>{this.state.findInDoc&&(this.logFindAction(n.UserAction.FindInDocEnd,"keyboard"===e?n.UserActionContext.Keyboard:n.UserActionContext.FindInDocSearchbar,e),this.state.findInDoc.controller.onReset(),this.setState({findInDoc:Object.assign(Object.assign({},this.state.findInDoc),{searchbarShown:!1,searchResult:void 0})}))},this.keyboardBindings=[...n.getZoomInOutBindings({zoomIn:this.zoomIn,zoomOut:this.zoomOut}),n.getBrowserFindBinding((()=>this.logFindAction(n.UserAction.FindInDocStart,n.UserActionContext.Keyboard,"keyboard"))),n.getFindInDocBinding((()=>this.findInDoc("keyboard")))],this.metadataBatchPageRanges=[[0,n.TEXT_BATCH_SIZE]],n.PreviewsEventLogger.mark(n.PreviewsTimingEvents.FVSDK_DOC_CONTAINER_START),this.state.findInDoc={searchbarShown:!1,controller:new ue({fileViewerId:e.fileViewerId,previewKey:e.previewKey,dispatch:e.dispatch,retrievePages:()=>{var e,t;return null!==(t=null===(e=this.props.rivieraData)||void 0===e?void 0:e.pages)&&void 0!==t?t:[]},previewMetadata:e.previewMetadata,rivieraData:e.rivieraData,onSearchResult:e=>{this.state.findInDoc&&this.setState({findInDoc:Object.assign(Object.assign({},this.state.findInDoc),{searchResult:e})})},fetchNextPageChunk:e.fetchNextPageBatch})}}recalculateFitScaleFactor(e=this.props){var t;const{rivieraData:i,fileViewerId:a,previewKey:r,width:s,height:o,dispatch:l,featureConfig:c}=e;if(!i||!i.metadata)return;const d=n.shouldShowDocSidebar(s,n.PreviewType.SsrDoc)&&e.fileViewerUiData.isDocSidebarOpen,g=null===(t=this.props.fileMetadata)||void 0===t?void 0:t.file_name,{scaleToFit:h,maxWidth:u}=c.preview_types[n.PreviewType.SsrDoc],p=n.calculateDocumentScaleFactor({width:s,height:o,dimensions:i.metadata.dimensions,isDocSidebarVisible:d,scaleToFit:h,fileName:g,maxWidth:u});l(n.updateFitScaleFactor({fileViewerId:a,previewKey:r,fitScaleFactor:p}));const f=n.calcDocFitToWidthScale({width:s,dimensions:i.metadata.dimensions,isDocSidebarVisible:d,maxWidth:u});l(n.updateFitToWidthScaleFactor({fileViewerId:a,previewKey:r,storedFitToWidthScaleFactor:f}))}componentDidUpdate(){this.props.filePreviewUiData.passwordAttempts>=3&&this.showPasswordProtectedError()}componentDidMount(){this.props.fileMetadata&&ze.includes(n.getFileExtension(this.props.fileMetadata.file_name))&&this.props.dispatch(n.triggerDynamicRoutingModalCheck()),this.recalculateFitScaleFactor(),n.PreviewsEventLogger.mark(n.PreviewsTimingEvents.FVSDK_DOC_CONTAINER_MOUNT)}UNSAFE_componentWillReceiveProps(e){const{rivieraData:t,previewMetadata:i}=e;t!==this.props.rivieraData&&this.setState({transformedData:t&&ge(t)});const{currentPageIndex:a}=e.filePreviewUiData;n.canPreviewInPreviewDoc(i)&&this.maybeFetchPageDataWithMetadata(a),this.recalculateFitScaleFactor(e)}render(){const{fileMetadata:e,filePreviewUiData:t,width:a,brandingInfo:r,sharedLinkInfo:s}=this.props,{transformedData:o,findInDoc:l}=this.state,c=e?e.file_name:"";if(this.props.rivieraData.needsPassword)return K.createElement(Me,{passwordAttempt:t.passwordAttempts,onSubmit:this.handlePasswordSubmit,onDismiss:this.showPasswordProtectedError,fileName:c});const d=n.DOC_PAGE_MARGIN+n.DOC_PAGE_MARGIN_LEFT,g=Math.round(100*(a-d-n.DOC_SIDEBAR_WIDTH)/window.innerWidth/window.devicePixelRatio),h=Object.assign(Object.assign({},t),{viewportWidth:g}),u=Object.assign(Object.assign({},this.props),{onRenderSucceeded:this.onRenderSucceeded,filePreviewUiData:h,data:o||[],onPageChange:this.handlePdfPageChange,layerRenderFn:De,findInDocData:null==l?void 0:l.searchResult,findInDocController:null==l?void 0:l.controller,brandingInfo:r,sharedLinkInfo:s,logSidebarPageClick:this.logSidebarPageClick,logDocPageload:this.logDocPageload});return K.createElement("div",{className:i.app},K.createElement(n.PreviewControlWrapper,{onFindInDoc:()=>this.findInDoc("click"),getPageForSelection:this.getPageForSelection}),n.isPpt(c)?K.createElement(Ve,Object.assign({},u,{onPageChange:this.handlePageChange,onPageRef:this.capturePageRef})):K.createElement(Ke,Object.assign({},u,{onPageRef:this.capturePageRef})),l&&l.searchbarShown&&K.createElement(pe,{onClose:this.closeFindInDoc,controller:l.controller}),K.createElement(n.KeyboardBindingConnector,{name:"preview_doc",keyboardBindings:this.keyboardBindings}))}}We.displayName="UnconnectedPreviewDoc";const $e=e=>{const{fileViewerId:t,previewKey:i,rivieraData:a,fetchNextPageBatch:r,onRenderSucceeded:s,previewSessionId:o,brandingInfo:l}=e,c=n.useIntl(),d=n.useDispatch(),{isLoggedIn:g}=n.useFileViewerContext(),h=n.useFileViewerSelector(n.getSharedLinkInfo,t),u=n.usePreviewState(t,i,n.filterDocFilePreviewUiState),p=n.useCurrentPreviewMetadata(),f=n.useFileViewerSelector(n.getSubpaths,t),m=n.useFileViewerSelector(n.getRootFile,t),v=!!n.useFileViewerSelector(n.getSelectedEditPluginId,t),b=n.useRenderSucceededWithLogging(o,s);return u&&a?K.createElement(We,Object.assign({},e,u,{onRenderSucceeded:b,intl:c,dispatch:d,isLoggedIn:g,sharedLinkInfo:h,brandingInfo:l,rivieraData:a,isEditing:v,fetchNextPageBatch:r,previewMetadata:p,subpaths:f,fileInfo:m})):null};$e.displayName="PreviewDoc",e.PreviewDoc=$e,e.UnconnectedPreviewDoc=We}));
//# sourceMappingURL=c_file_viewer_preview_doc.js-vflhDA5pH.map
