define(["exports","./c_lodash-es_lodash"],(function(n,e){"use strict";let t=new Set;if(window.ensemble){const n=window;n.REGISTERED_EXCEPTION_TAGS||(n.REGISTERED_EXCEPTION_TAGS=new Set),t=n.REGISTERED_EXCEPTION_TAGS}var r,c={exports:{}};r=c,function(n,e){if(n){var t={},c=n.TraceKit,i=[].slice,l="?";t.noConflict=function(){return n.TraceKit=c,t},t.wrap=function(n){return function(){try{return n.apply(this,arguments)}catch(n){throw t.report(n),n}}},t.report=function(){var e,r,c=[],l=null,u=null,s=null;function a(n,e){var r=null;if(!e||t.collectWindowErrors){for(var l in c)if(o(c,l))try{c[l].apply(null,[n].concat(i.call(arguments,2)))}catch(n){r=n}if(r)throw r}}function f(n,r,c,i,l){if(s)t.computeStackTrace.augmentStackTraceWithInitialElement(s,r,c,n),p();else if(l)a(t.computeStackTrace(l),!0);else{var o={url:r,line:c,column:i};o.func=t.computeStackTrace.guessFunctionName(o.url,o.line),o.context=t.computeStackTrace.gatherContext(o.url,o.line),a({mode:"onerror",message:n,stack:[o]},!0)}return!!e&&e.apply(this,arguments)}function p(){var n=s,e=l;l=null,s=null,u=null,a.apply(null,[n,!1].concat(e))}function m(e){if(s){if(u===e)return;p()}var r=t.computeStackTrace(e);throw s=r,u=e,l=i.call(arguments,1),n.setTimeout((function(){u===e&&p()}),r.incomplete?2e3:0),e}return m.subscribe=function(t){!0!==r&&(e=n.onerror,n.onerror=f,r=!0),c.push(t)},m.unsubscribe=function(n){for(var e=c.length-1;e>=0;--e)c[e]===n&&c.splice(e,1)},m}(),t.computeStackTrace=function(){var e={};function r(r){if("string"!=typeof r)return[];if(!o(e,r)){var c="",i="";try{i=n.document.domain}catch(n){}var l=/(.*)\:\/\/([^:\/]+)([:\d]*)\/{0,1}([\s\S]*)/.exec(r);l&&l[2]===i&&(c=function(e){if(!t.remoteFetching)return"";try{var r=function(){try{return new n.XMLHttpRequest}catch(e){return new n.ActiveXObject("Microsoft.XMLHTTP")}}();return r.open("GET",e,!1),r.send(""),r.responseText}catch(n){return""}}(r)),e[r]=c?c.split("\n"):[]}return e[r]}function c(n,e){var t,c=/function ([^(]*)\(([^)]*)\)/,i=/['"]?([0-9A-Za-z$_]+)['"]?\s*[:=]\s*(function|eval|new Function)/,o="",s=r(n);if(!s.length)return l;for(var a=0;a<10;++a)if(!u(o=s[e-a]+o)){if(t=i.exec(o))return t[1];if(t=c.exec(o))return t[1]}return l}function i(n,e){var c=r(n);if(!c.length)return null;var i=[],l=Math.floor(t.linesOfContext/2),o=l+t.linesOfContext%2,s=Math.max(0,e-l-1),a=Math.min(c.length,e+o-1);e-=1;for(var f=s;f<a;++f)u(c[f])||i.push(c[f]);return i.length>0?i:null}function s(n){return n.replace(/[\-\[\]{}()*+?.,\\\^$|#]/g,"\\$&")}function a(n){return s(n).replace("<","(?:<|&lt;)").replace(">","(?:>|&gt;)").replace("&","(?:&|&amp;)").replace('"','(?:"|&quot;)').replace(/\s+/g,"\\s+")}function f(n,e){for(var t,c,i=0,l=e.length;i<l;++i)if((t=r(e[i])).length&&(t=t.join("\n"),c=n.exec(t)))return{url:e[i],line:t.substring(0,c.index).split("\n").length,column:c.index-t.lastIndexOf("\n",c.index)-1};return null}function p(n,e,t){var c,i=r(e),l=new RegExp("\\b"+s(n)+"\\b");return t-=1,i&&i.length>t&&(c=l.exec(i[t]))?c.index:null}function m(e){if(!u(n&&n.document)){for(var t,r,c,i,l=[n.location.href],o=n.document.getElementsByTagName("script"),p=""+e,m=0;m<o.length;++m){var g=o[m];g.src&&l.push(g.src)}if(c=/^function(?:\s+([\w$]+))?\s*\(([\w\s,]*)\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/.exec(p)){var x=c[1]?"\\s+"+c[1]:"",h=c[2].split(",").join("\\s*,\\s*");t=s(c[3]).replace(/;$/,";?"),r=new RegExp("function"+x+"\\s*\\(\\s*"+h+"\\s*\\)\\s*{\\s*"+t+"\\s*}")}else r=new RegExp(s(p).replace(/\s+/g,"\\s+"));if(i=f(r,l))return i;if(c=/^function on([\w$]+)\s*\(event\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/.exec(p)){var d=c[1];if(t=a(c[2]),i=f(r=new RegExp("on"+d+"=[\\'\"]\\s*"+t+"\\s*[\\'\"]","i"),l[0]))return i;if(i=f(r=new RegExp(t),l))return i}return null}}function g(n,e,t,r){var l={url:e,line:t};if(l.url&&l.line){n.incomplete=!1,l.func||(l.func=c(l.url,l.line)),l.context||(l.context=i(l.url,l.line));var o=/ '([^']+)' /.exec(r);if(o&&(l.column=p(o[1],l.url,l.line)),n.stack.length>0&&n.stack[0].url===l.url){if(n.stack[0].line===l.line)return!1;if(!n.stack[0].line&&n.stack[0].func===l.func)return n.stack[0].line=l.line,n.stack[0].context=l.context,!1}return n.stack.unshift(l),n.partial=!0,!0}return n.incomplete=!0,!1}function x(n,e){for(var r,i,o,u=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,s=[],a={},f=!1,d=x.caller;d&&!f;d=d.caller)if(d!==h&&d!==t.report){if(i={url:null,func:l,args:[],line:null,column:null},d.name?i.func=d.name:(r=u.exec(d.toString()))&&(i.func=r[1]),void 0===i.func)try{i.func=r.input.substring(0,r.input.indexOf("{"))}catch(n){}if(o=m(d)){i.url=o.url,i.line=o.line,i.func===l&&(i.func=c(i.url,i.line));var v=/ '([^']+)' /.exec(n.message||n.description);v&&(i.column=p(v[1],o.url,o.line))}a[""+d]?f=!0:a[""+d]=!0,s.push(i)}e&&s.splice(0,e);var E={mode:"callers",name:n.name,message:n.message,stack:s};return g(E,n.sourceURL||n.fileName,n.line||n.lineNumber,n.message||n.description),E}function h(e,t){var s=null;t=null==t?0:+t;try{if(s=function(n){var e=n.stacktrace;if(e){for(var t,r=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,l=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^\)]+))\((.*)\))? in (.*):\s*$/i,o=e.split("\n"),u=[],s=0;s<o.length;s+=2){var a=null;if((t=r.exec(o[s]))?a={url:t[2],line:+t[1],column:null,func:t[3],args:[]}:(t=l.exec(o[s]))&&(a={url:t[6],line:+t[1],column:+t[2],func:t[3]||t[4],args:t[5]?t[5].split(","):[]}),a){if(!a.func&&a.line&&(a.func=c(a.url,a.line)),a.line)try{a.context=i(a.url,a.line)}catch(n){}a.context||(a.context=[o[s+1]]),u.push(a)}}return u.length?{mode:"stacktrace",name:n.name,message:n.message,stack:u}:null}}(e),s)return s}catch(n){}try{if(s=function(n){if(!n.stack)return null;for(var e,t,r=/^\s*at (.*?) ?\(((?:file|https?|blob|chrome-extension|native|webpack|eval).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,o=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|\[native).*?)(?::(\d+))?(?::(\d+))?\s*$/i,s=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,a=n.stack.split("\n"),f=[],m=/^(.*) is undefined$/.exec(n.message),g=0,x=a.length;g<x;++g){if(e=r.exec(a[g])){var h=e[2]&&-1!==e[2].indexOf("native");t={url:h?null:e[2],func:e[1]||l,args:h?[e[2]]:[],line:e[3]?+e[3]:null,column:e[4]?+e[4]:null}}else if(e=s.exec(a[g]))t={url:e[2],func:e[1]||l,args:[],line:+e[3],column:e[4]?+e[4]:null};else{if(!(e=o.exec(a[g])))continue;t={url:e[3],func:e[1]||l,args:e[2]?e[2].split(","):[],line:e[4]?+e[4]:null,column:e[5]?+e[5]:null}}!t.func&&t.line&&(t.func=c(t.url,t.line)),t.line&&(t.context=i(t.url,t.line)),f.push(t)}return f.length?(f[0]&&f[0].line&&!f[0].column&&m?f[0].column=p(m[1],f[0].url,f[0].line):f[0].column||u(n.columnNumber)||(f[0].column=n.columnNumber+1),{mode:"stack",name:n.name,message:n.message,stack:f}):null}(e),s)return s}catch(n){}try{if(s=function(e){var t=e.message.split("\n");if(t.length<4)return null;var l,u=/^\s*Line (\d+) of linked script ((?:file|https?|blob)\S+)(?:: in function (\S+))?\s*$/i,s=/^\s*Line (\d+) of inline#(\d+) script in ((?:file|https?|blob)\S+)(?:: in function (\S+))?\s*$/i,p=/^\s*Line (\d+) of function script\s*$/i,m=[],g=n&&n.document&&n.document.getElementsByTagName("script"),x=[];for(var h in g)o(g,h)&&!g[h].src&&x.push(g[h]);for(var d=2;d<t.length;d+=2){var v=null;if(l=u.exec(t[d]))v={url:l[2],func:l[3],args:[],line:+l[1],column:null};else if(l=s.exec(t[d])){v={url:l[3],func:l[4],args:[],line:+l[1],column:null};var E=+l[1],w=x[l[2]-1];if(w){var b=r(v.url);if(b){var S=(b=b.join("\n")).indexOf(w.innerText);S>=0&&(v.line=E+b.substring(0,S).split("\n").length)}}}else if(l=p.exec(t[d])){var T=n.location.href.replace(/#.*$/,""),k=f(new RegExp(a(t[d+1])),[T]);v={url:T,func:"",args:[],line:k?k.line:l[1],column:null}}if(v){v.func||(v.func=c(v.url,v.line));var O=i(v.url,v.line),y=O?O[Math.floor(O.length/2)]:null;O&&y.replace(/^\s*/,"")===t[d+1].replace(/^\s*/,"")?v.context=O:v.context=[t[d+1]],m.push(v)}}return m.length?{mode:"multiline",name:e.name,message:t[0],stack:m}:null}(e),s)return s}catch(n){}try{if(s=x(e,t+1))return s}catch(n){}return{mode:"failed"}}return h.augmentStackTraceWithInitialElement=g,h.guessFunctionName=c,h.gatherContext=i,h.ofCaller=function(n){n=1+(null==n?0:+n);try{throw new Error}catch(e){return h(e,n+1)}},h.getSource=r,h}(),t.extendToAsynchronousCallbacks=function(){var e=function(e){var r=n[e];n[e]=function(){var n=i.call(arguments),e=n[0];return"function"==typeof e&&(n[0]=t.wrap(e)),r.apply?r.apply(this,n):r(n[0],n[1])}};e("setTimeout"),e("setInterval")},t.remoteFetching||(t.remoteFetching=!0),t.collectWindowErrors||(t.collectWindowErrors=!0),(!t.linesOfContext||t.linesOfContext<1)&&(t.linesOfContext=11),r.exports&&n.module!==r?r.exports=t:n.TraceKit=t}function o(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function u(n){return void 0===n}}("undefined"!=typeof window?window:e.commonjsGlobal);var i=c.exports,l=e.getDefaultExportFromCjs(i);l.linesOfContext=1,l.remoteFetching=!1,l.noConflict();const o=["\\bassert\\b","\\bcollectExceptionStack\\b","\\breportException\\b","\\breportStack\\b","\\bsendExceptionReport\\b"];function u(n,e){const t=n=>{if(!n)return!1;for(const t of e)if(-1!==n.search(t))return!0;return!1};for(;n.length>0&&t(n[0].func);)n=n.slice(1);return n}n.SEVERITY={CRITICAL:"critical",NONCRITICAL:"non-critical",USER_ERROR:"user-error",UNCAUGHT:"uncaught",OPERATIONAL:"operational"},n.TraceKit=l,n.collectExceptionExtra=function(n){let e={};if(n.isAssertion){const t=n;t.assertOptions&&t.assertOptions.exc_extra&&(e=Object.assign(Object.assign({},e),t.assertOptions.exc_extra))}n.excExtra&&(e=Object.assign(Object.assign({},e),n.excExtra)),window.DB_FRAME_BUST&&(e.DB_FRAME_BUST=!0),e.client_time=(new Date).toString(),e.client_utc_time=(new Date).toUTCString();const t={};for(const n in window.requireContexts)if(window.requireContexts.hasOwnProperty(n)){const e={},r=window.requireContexts[n].firstUndefinedModule;r&&(e.first_undefined_module=r),t[n]=e}e.page_alameda_failures=t;const r=window.ensemble;return null!=r&&(null!=r.getExceptionInfo&&(e.dws_page_info=r.getExceptionInfo()),null!=r.getPageletInfoForExceptionReporting&&(e.pagelet_info=r.getPageletInfoForExceptionReporting())),e},n.collectExceptionStack=function(n){const e=l.computeStackTrace(n),t=null!=(e&&e.stack)?u(e.stack,o):[];let r=[];try{throw new Error}catch(n){const e=l.computeStackTrace(n);null!=e&&null!=e.stack&&(r=e.stack),r=u(r,o)}let c=t.length-r.length;return c<=0&&(c=1),[t.slice(0,c),t.slice(c),e]},n.collectExceptionTags=function(n){const e=new Set;if(n.isAssertion){const t=n;t.assertOptions&&t.assertOptions.tags&&t.assertOptions.tags.forEach((n=>e.add(n)))}return n.tags&&n.tags.forEach((n=>e.add(n))),function(){const n=[];return t.forEach((e=>n.push(e))),n}().forEach((n=>e.add(n))),Array.from(e.values())},n.register_tag=function(n){t.add(n)},n.unregister_tag=function(n){t.delete(n)}}));
//# sourceMappingURL=c_core_exception_info.js-vflCjAqVU.map
